!function(a){var b={};b.enabled=!1,b.version="1.0.3",b._={},a.kik=a.cards=b}(window),function(){Object.keys||(Object.keys=function(a){var b=[];for(var c in a)b.push(c);return b}),Array.isArray||(Array.isArray=function(a){return"[object Array]"==Object.prototype.toString.call(a)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=b||0,d=this.length;d>c;c++)if(c in this&&this[c]===a)return c;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;d>c;c++)c in this&&a.call(b,this[c],c,this)}),Array.prototype.map||(Array.prototype.map=function(a,b){for(var c=this.length,d=new Array(c),e=0;c>e;e++)e in this&&(d[e]=a.call(b,this[e],e,this));return d}),Array.prototype.filter||(Array.prototype.filter=function(a,b){for(var c,d=[],e=0,f=this.length;f>e;e++)c=this[e],e in this&&a.call(b,c,e,this)&&d.push(c);return d}),Array.prototype.reduce||(Array.prototype.reduce=function(a,b){var c=0,d=this.length;for("undefined"==typeof b&&(b=this[0],c=1);d>c;c++)c in this&&(b=a(b,this[c],c,this));return b}),String.prototype.trim||(String.prototype.trim=function(){var a=/^\s+|\s+$/g;return function(){return String(this).replace(a,"")}}())}(),"undefined"==typeof document||"classList"in document.createElement("a")||!function(a){var b="classList",c="prototype",d=(a.HTMLElement||a.Element)[c],e=Object,f=String[c].trim||function(){return this.replace(/^\s+|\s+$/g,"")},g=Array[c].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},h=function(a,b){this.name=a,this.code=DOMException[a],this.message=b},i=function(a,b){if(""===b)throw new h("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(b))throw new h("INVALID_CHARACTER_ERR","String contains an invalid character");return g.call(a,b)},j=function(a){for(var b=f.call(a.className),c=b?b.split(/\s+/):[],d=0,e=c.length;e>d;d++)this.push(c[d]);this._updateClassName=function(){a.className=this.toString()}},k=j[c]=[],l=function(){return new j(this)};if(h[c]=Error[c],k.item=function(a){return this[a]||null},k.contains=function(a){return a+="",-1!==i(this,a)},k.add=function(a){a+="",-1===i(this,a)&&(this.push(a),this._updateClassName())},k.remove=function(a){a+="";var b=i(this,a);-1!==b&&(this.splice(b,1),this._updateClassName())},k.toggle=function(a){a+="",-1===i(this,a)?this.add(a):this.remove(a)},k.toString=function(){return this.join(" ")},e.defineProperty){var m={get:l,enumerable:!0,configurable:!0};try{e.defineProperty(d,b,m)}catch(n){-2146823252===n.number&&(m.enumerable=!1,e.defineProperty(d,b,m))}}else e[c].__defineGetter__&&d.__defineGetter__(b,l)}(self),function(a,b,c){function d(a){if("function"!=typeof a)throw TypeError("log listener must be a function, got "+a);j.push(a)}function e(a,b){i||(i=!0,j.forEach(function(c){try{c(a,b)}catch(d){}}),i=!1)}function f(){var b=a.console;"object"!=typeof b&&(b={}),b.log=g(b.log,"log"),b.warn=g(b.warn,"warn"),b.error=g(b.error,"error"),h(),a.console=b}function g(b,c){switch(typeof b){case"undefined":b=function(){};case"function":break;default:return b}return function(){var d=Array.prototype.map.call(arguments,function(b){if("object"==typeof b&&null!==b&&a.JSON&&JSON.stringify)try{return JSON.stringify(b)}catch(c){}return b+""}).join(" ");e(c,d),b.apply(this,arguments)}}function h(){a.addEventListener&&a.addEventListener("error",function(a){e("exception",a.message+"")},!1)}var i=!1,j=[];f(),c._.onLog=d}(window,document,kik),function(a,b,c){var d={};c.utils=d,d.error=function(b){a.console&&a.console.error&&a.console.error("object"==typeof b&&b.stack?b.stack:b+"")},d.platform={},d.platform.os=function(){var b,c,d,e=a.navigator.userAgent;(d=/\bCPU.*OS (\d+(_\d+)?)/i.exec(e))?(b="ios",c=d[1].replace("_",".")):(d=/\bAndroid (\d+(\.\d+)?)/.exec(e))?(b="android",c=d[1]):(d=/\bWindows Phone OS (\d+(\.\d+)?)/.exec(e))?(b="winphone",c=d[1]):(d=/\bMac OS X (\d+(_\d+)?)/.exec(e))?(b="osx",c=d[1].replace("_",".")):(d=/\bWindows NT (\d+(.\d+)?)/.exec(e))?(b="windows",c=d[1]):(d=/\bLinux\b/.exec(e))?(b="linux",c=null):(d=/\b(Free|Net|Open)BSD\b/.exec(e))&&(b="bsd",c=null);var f={name:b,version:c&&a.parseFloat(c),versionString:c};return f[b]=!0,f}(),d.os=d.platform.os,d.platform.browser=function(){var b,c,e,f=a.navigator.userAgent;(e=/\bMSIE (\d+(\.\d+)?)/i.exec(f))?(b="msie",c=e[1]):(e=/\bOpera\/(\d+(\.\d+)?)/i.exec(f))?(b="opera",c=e[1],(e=/\bVersion\/(\d+(\.\d+)?)/i.exec(f))&&(c=e[1])):(e=/\bChrome\/(\d+(\.\d+)?)/i.exec(f))?(b="chrome",c=e[1]):-1!=f.indexOf("Safari/")&&(e=/\bVersion\/(\d+(\.\d+)?)/i.exec(f))?(b=d.platform.os.android?"android":"safari",c=e[1]):(e=/\bFirefox\/(\d+(\.\d+)?)/i.exec(f))&&(b="firefox",c=e[1]);var g={name:b,version:c&&a.parseFloat(c),versionString:c};return g[b]=!0,g}(),d.browser=d.platform.browser,d.platform.engine=function(){var b,c,d,e=a.navigator.userAgent;(d=/\bTrident\/(\d+(\.\d+)?)/i.exec(e))?(b="trident",c=d[1]):(d=/\bMSIE 7/i.exec(e))?(b="trident",c="3.1"):(d=/\bPresto\/(\d+(\.\d+)?)/i.exec(e))?(b="presto",c=d[1]):(d=/\bAppleWebKit\/(\d+(\.\d+)?)/i.exec(e))?(b="webkit",c=d[1]):(d=/\brv\:(\d+(\.\d+)?)/i.exec(e))&&(b="gecko",c=d[1]);var f={name:b,version:c&&a.parseFloat(c),versionString:c};return f[b]=!0,f}(),d.engine=d.platform.engine,d.random={},d.random.name=function(a){return("____"+(a||"")+"____"+Math.random()).replace(/\.|\-/g,"")},d.random.num=function(){return Math.floor(0x40000000000000*Math.random()-9007199254740992)},d.random.uuid=function(){var a,b=36,c=new Array(b),d="0123456789abcdef";for(a=0;b>a;a++)c[a]=Math.floor(16*Math.random());for(c[14]=4,c[19]=3&c[19]|8,a=0;b>a;a++)c[a]=d[c[a]];return c[8]=c[13]=c[18]=c[23]="-",c.join("")},d.enumerate=function(a){"object"!=typeof a&&(a=Array.prototype.slice.call(arguments));for(var b={},c=0,d=a.length;d>c;c++)b[a[c]]=c;return b},d.preloadImage=function(){function a(){var a=arguments;c.ready(function(){b.apply(d,a)})}function b(a,b){function c(b){if(!f){f=!0;var c=e[a];e[a]=b;for(var d,g=0,h=c.length;h>g;g++)d=c[g],d&&d(b)}}if("string"!=typeof a)return void d.asyncJoin(a.map(function(a){return function(b){d.preloadImage(a,b)}}),b||function(){});if(e[a]===!0)return void(b&&setTimeout(function(){b(!0)},0));if(e[a])return void e[a].push(b);e[a]=[b];var f=!1,g=new Image;g.onload=function(){c(!0)},g.onerror=function(){c(!1)},g.src=a}var e={};return a}(),d.url={},d.url.dir=function(){var b=/\/[^\/]*$/;return function(c){switch(typeof c){case"undefined":c=a.location.href;case"string":break;default:throw TypeError("url "+c+" must be string if defined")}return c=(c.split("?")[0]||"").split("#")[0]||"",c.replace(b,"/")}}(),d.url.host=function(){var b=/^https?\:\/\/([^\/]+)\/.*$/;return function(c){switch(typeof c){case"undefined":return a.location.host;case"string":break;default:throw TypeError("url "+c+" must be string if defined")}var d=b.exec(c);return d&&d[1]}}(),d.url.path=function(){var b=/^https?\:\/\/[^\/]+(\/.*)$/;return function(c){switch(typeof c){case"undefined":return a.location.pathname;case"string":break;default:throw TypeError("url "+c+" must be string if defined")}var d=b.exec(c);return d&&d[1]}}(),d.url.dataToQuery=function(){var a=/%20/g;return function(b){var c,d,e,f=[];for(var g in b)c=b[g],null!==c&&void 0!==c&&(d=encodeURIComponent(g),e=encodeURIComponent(c),f.push(d+"="+e));return f.join("&").replace(a,"+")}}(),d.url.queryToData=function(){var a=/([^&=]+)=([^&]+)/g,b=/\+/g;return function(c){var d,e,f,g={};if(c)for(c=c.replace(b,"%20");d=a.exec(c);)e=decodeURIComponent(d[1]),f=decodeURIComponent(d[2]),g[e]=f;return g}}(),d.url.withQuery=function(b,c){c||(c=b,b=a.location.href),b=b.split("?")[0];var e=d.url.dataToQuery(c);return e&&(b+="?"+e),b},d.url.updateQuery=function(b,c){c||(c=b,b=a.location.href);var e=d.url.parseQuery(b);return d.obj.extend(e,c),d.url.withQuery(b,e)},d.url.parseQuery=function(b){return b=b||a.location.href,d.url.queryToData(b.split("?")[1])},d.url.query=d.url.parseQuery(),d.jsonp=function(c){function e(){a[i]=h;try{q.parentNode.removeChild(r)}catch(b){}}function f(){g||(e(),m=h,n=h,o(),o=h,p(),p=h)}var g=!1,h=function(){},i=d.random.name("PICARD_UTILS_JSONP_CALLBACK"),j=c.url,k=d.obj.copy(c.data),l=c.callbackName||"callback",m=c.callback||h,n=c.success||h,o=c.error||h,p=c.complete||h,q=b.getElementsByTagName("script")[0],r=b.createElement("script");k[l]="window."+i,r.type="text/javascript",r.async=!0,r.onerror=f,r.src=d.url.updateQuery(j,k),a[i]=function(){g=!0,e(),m.apply(this,arguments),m=h,n.apply(this,arguments),n=h,o=h,p(),p=h},c.timeout&&setTimeout(f,c.timeout),q.parentNode.insertBefore(r,q)},d.asyncJoin=function(b,c){function d(){0!==g||f||(f=!0,setTimeout(function(){e?c.call(a,h):c.apply(a,h)},0))}var e=!0;Array.isArray(b)||(e=!1,b=Array.prototype.slice.call(arguments),c=b.pop());var f=!1,g=b.length,h=new Array(g);return 0===g?void d():void b.forEach(function(a,b){setTimeout(function(){var c=!1;a(function(){if(!c&&(c=!0,!h[b])){var a=Array.prototype.slice.call(arguments);h[b]=a,g--,d()}})},0)})},d.obj={},d.obj.extend=function(a,b){var c,d;for(var e in b)c=a[e],d=b[e],c!==d&&(a[e]=d);return a},d.obj.copy=function(a){return d.obj.extend({},a)},d.obj.forEach=function(a,b,c){for(var d in a)b.call(c,d,a[d],a)},d.obj.inverse=function(a){var b={};for(var c in a)b[a[c]]=c;return b},d.obj.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},d.obj.has=function(a,b){for(var c in a)if(a[c]===b)return!0;return!1},d.windowReady=function(c){function d(){a.removeEventListener("load",d),setTimeout(function(){c()},0)}return"complete"===b.readyState?void setTimeout(function(){c()},0):void a.addEventListener("load",d,!1)},d.ready=function(){function c(){if(!g){g=!0;for(var a;a=h.shift();)try{a()}catch(b){d.error(b)}}}function e(a){try{b.documentElement.doScroll("left")}catch(c){return void setTimeout(function(){e(a)},1)}a&&a()}function f(c){if("complete"===b.readyState)return void setTimeout(c,0);if(b.addEventListener)b.addEventListener("DOMContentLoaded",c,!1),a.addEventListener("load",c,!1);else if(b.attachEvent){b.attachEvent("onreadystatechange",c),a.attachEvent("onload",c);var d=!1;try{d=null===a.frameElement}catch(f){}b.documentElement.doScroll&&d&&setTimeout(function(){e(c)},0)}}var g=!1,h=[];return f(c),function(a){if("function"!=typeof a)throw TypeError("callback "+a+" must be a function");g?setTimeout(function(){a()},0):h.push(a)}}()}(window,document,kik),function(a,b,c){function d(){this.handlers={},this.onceHandlers={},this.globalHandlers=[],this.globalOnceHandlers=[]}function e(a,b){for(var c=a.length;c--;)a[c]===b&&a.splice(c,1)}function f(a){"undefined"==typeof a&&(a={});var b=new d;return a.on=function(c,d){if(Array.isArray(c))return void c.forEach(function(b){a.on(b,d)});if("undefined"==typeof d&&(d=c,c=""),"string"!=typeof c)throw TypeError("name "+c+" must be a string");if("function"!=typeof d)throw TypeError("handler "+d+" must be a function");c?b.bind(c,d):b.bindToAll(d)},a.off=function(c,d){if(Array.isArray(c))return void c.forEach(function(b){a.off(b,d)});if("undefined"==typeof d&&(d=c,c=""),"string"!=typeof c)throw TypeError("name "+c+" must be a string");if("function"!=typeof d)throw TypeError("handler "+d+" must be a function");c?b.unbind(c,d):b.unbindFromAll(d)},a.once=function(c,d){if(Array.isArray(c))return void c.forEach(function(b){a.once(b,d)});if("undefined"==typeof d&&(d=c,c=""),"string"!=typeof c)throw TypeError("name "+c+" must be a string");if("function"!=typeof d)throw TypeError("handler "+d+" must be a function");c?b.bindOnce(c,d):b.bindToAllOnce(d)},a.trigger=function(c,d,e){if(Array.isArray(c))return void c.forEach(function(b){a.trigger(b,d,e)});if("string"!=typeof c)throw TypeError("name "+c+" must be a string");b.trigger(c,d,e)},a}function g(){this.handlers=[],this.events=[]}function h(){var a=new g;return{handler:function(b){return a.addHandler(b)},trigger:function(b){a.triggerEvent(b)},triggerMulti:function(b){a.triggerEvents(b)}}}c.events=f,c.events.handlers=h,d.prototype.insureNamespace=function(a){this.handlers[a]||(this.handlers[a]=[]),this.onceHandlers[a]||(this.onceHandlers[a]=[])},d.prototype.bind=function(a,b){this.insureNamespace(a),this.handlers[a].push(b)},d.prototype.bindToAll=function(a){this.globalHandlers.push(a)},d.prototype.bindOnce=function(a,b){this.insureNamespace(a),this.onceHandlers[a].push(b)},d.prototype.bindToAllOnce=function(a){this.globalOnceHandlers.push(a)},d.prototype.unbind=function(a,b){this.insureNamespace(a),e(this.handlers[a],b),e(this.onceHandlers[a],b)},d.prototype.unbindFromAll=function(a){e(this.globalHandlers,a),e(this.globalOnceHandlers,a);for(var b in this.handlers)e(this.handlers[b],a),e(this.onceHandlers[b],a)},d.prototype.trigger=function(a,b,d){function e(e){try{e.call(d,b,a)}catch(f){c.utils.error(f)}}this.insureNamespace(a),"undefined"==typeof d&&(d=this),this.handlers[a].forEach(e),this.globalHandlers.forEach(e),this.onceHandlers[a].forEach(e),this.globalOnceHandlers.forEach(e),this.onceHandlers[a].splice(0),this.globalOnceHandlers.splice(0)},g.prototype.addHandler=function(a){return this.handlers.push(a),this.processEvents()},g.prototype.triggerEvent=function(a){this.events.push(a),this.processEvents()},g.prototype.triggerEvents=function(a){this.events=this.events.concat(a),this.processEvents()},g.prototype.processEvents=function(){if(!this.events.length||!this.handlers.length)return!1;var a=this.events.splice(0),b=this.handlers;return a.forEach(function(a){b.forEach(function(b){b(a)})}),!0},f(c)}(window,document,kik),kik.ready=function(a,b){function c(a){f?f.push(a):e(a)}function d(){b.utils.windowReady(function(){setTimeout(function(){var a=f.slice();f=null,a.forEach(e)},3)})}function e(a){try{a()}catch(c){b.utils.error(c)}}var f=[];return d(),c}(window,kik),kik.open=function(a,b){function c(c,e,f){if("string"!=typeof c)throw TypeError("url must be a string, got "+c);switch(typeof e){case"boolean":f=e,e="";break;case"object":e=JSON.stringify(e);case"undefined":case"string":break;default:throw TypeError("linkData must be a string of JSON if defined, got "+e)}e&&(c=c.split("#")[0]+"#"+encodeURIComponent(e));var g,h="card://"===c.substr(0,7),i="cards://"===c.substr(0,8);try{g=b._.bridge("Browser")}catch(j){}return g&&g.openPage?((h||i)&&(c="http"+c.substr(4)),void g.openPage({url:c,popup:!!f})):void(h||i?g&&g.openCard?g.openCard({url:"http"+c.substr(4)}):d(c,"http"+c.substr(4)):g&&g.openExternal?g.openExternal({url:c}):a.location.href=c)}function d(c,d,f){if(!e.ios&&!e.android)return void(d&&(a.location.href=d));if(e.ios)return d&&setTimeout(function(){document.webkitHidden||(a.location.href=d)},e.ios?25:1e3),void(f?b.ready(function(){setTimeout(function(){a.location.href=c},0)}):a.location.href=c);var g;d&&(g=setTimeout(function(){a.location=d},1e3));var h=document.createElement("iframe");h.style.position="fixed",h.style.top="0",h.style.left="0",h.style.width="1px",h.style.height="1px",h.style.border="none",h.style.opacity="0",h.onload=function(){d&&clearTimeout(g);try{document.documentElement.removeChild(h)}catch(a){}},h.src=c,document.documentElement.appendChild(h)}{var e=b.utils.platform.os;b.utils.platform.browser}return a.open=function(a){c(a,!0)},c.card=d,c}(window,kik),function(a,b){var c="__PICARD_ID__";a.localStorage&&(a.localStorage[c]||(a.localStorage[c]=b.utils.random.uuid()),b._.id=a.localStorage[c])}(window,kik),function(a,b){if(-1!==navigator.userAgent.indexOf("Kik/")&&/\bandroid/i.test(navigator.userAgent)&&b&&!a.CardsBridge){var c=a.CardsBridge={};["invokeAsyncFunction","invokeFunction","poll"].forEach(function(a){c[a]=function(){var c=Array.prototype.slice.call(arguments);return c.unshift(a),b("CardsBridge",JSON.stringify(c))||""}})}}(window,window.prompt),function(window){if(window.chrome&&window.chrome.app&&!window.shimsham){var shimshamMeta=document.getElementById("shimsham-meta");if(shimshamMeta&&"META"===shimshamMeta.nodeName){var url=shimshamMeta.content;try{var xhr=new XMLHttpRequest;xhr.open("GET",url,!1),xhr.send(null),200===xhr.status?eval(xhr.responseText):console.log("Failed to load shimsham, extension not installed get it at dev.kik.com")}catch(e){}}}}(window),function(window,document,kik){function getBridge(){var a=getAndroidBridge();return a?a:os.ios&&!looksLikeChrome()?getIPhoneBridge():!1}function looksLikeChrome(){try{return"function"==typeof window.chrome.send}catch(a){return!1}}function getAndroidBridge(){if(!androidBridge)return!1;if("function"!=typeof androidBridge.invokeFunction)return!1;if("function"!=typeof androidBridge.poll)return!1;try{return makeBridgeCall(PLUGIN_REQUEST_VERSION).data}catch(a){return!1}}function getIPhoneBridge(){var a;try{a=makeBridgeCall(PLUGIN_REQUEST_VERSION).data}catch(b){}return a?a:!1}function sendIFrameSignal(a,b,c){var d,e,f=kik.utils.random.name("PICARD_BRIDGE_CALLBACK");window[f]=function(a,b){delete window[f],d=a,e=b};var g=BRIDGE_SIGNAL_URL+a+"/"+f+"?args="+encodeURIComponent(b)+"&async="+(c||""),h=document.documentElement,i=document.createElement("iframe");if(i.style.display="none",i.src=g,h.appendChild(i),h.removeChild(i),window[f])throw delete window[f],Error("bridge call "+a+" failed to return");return{status:d,data:e}}function sendBatchIFrameSignal(a){var b=a.map(function(a){return encodeURIComponent(a)}).join(","),c=BRIDGE_SIGNAL_URL+PLUGIN_REQUEST_BATCH+"?calls="+b,d=document.documentElement,e=document.createElement("iframe");e.style.display="none",e.src=c,d.appendChild(e),d.removeChild(e)}function androidBridgeCall(a,b,c){var d,e;if(c){if(!androidBridge.invokeAsyncFunction)throw TypeError("bridge: android bridge does not support async callbacks");d=androidBridge.invokeAsyncFunction(a,b,c)}else d=androidBridge.invokeFunction(a,b);try{e=JSON.parse(d)}catch(f){throw TypeError("bridge call for "+a+" responded with invalid JSON")}return{status:e.status,data:e.data}}function makeBridgeCall(a,b,c){if("string"!=typeof a)throw TypeError("bridge call "+a+" must be a string");switch(typeof b){case"function":c=b,b=void 0;case"undefined":b={};case"object":break;default:throw TypeError("bridge call arguments "+b+" must be a JSON object if specified")}switch(typeof c){case"undefined":case"function":break;default:throw TypeError("bridge async callback must be a function if defined, got "+c)}var d;try{d=JSON.stringify(b)}catch(e){throw TypeError("bridge call arguments "+b+" must be a JSON object")}var f;c&&(f=setupAsyncCallback(c));var g;return g=androidBridge?androidBridgeCall(a,d,f):sendIFrameSignal(a,d,f),!f||g&&g.status&&202===g.status||(setTimeout(function(){window[f]&&(androidBridge?window[f](JSON.stringify({status:500,data:null})):window[f](500,null))},0),g={status:202,data:{}}),g}function setupAsyncCallback(a){var b=kik.utils.random.name("PICARD_BRIDGE_ASYNC_CALLBACK");return window[b]=function(c,d){if(delete window[b],androidBridge)try{var e=JSON.parse(c);c=e.status,d=e.data}catch(f){throw Error("bridge failed to parse android async data, "+c)}"object"!=typeof d||null===d?a():!c||200>c||c>=300?a():a(d)},b}function setupEventCallback(a){var b=kik.utils.random.name("PICARD_BRIDGE_EVENT_CALLBACK");return window[b]=function(b,c){if(androidBridge)try{c=JSON.parse(c)}catch(d){throw Error("bridge failed to parse android event data, "+c)}a(b,c)},b}function setupAndroidPoll(){window.addEventListener("keyup",function(a){return 0===a.which?(performAndroidPoll(),!1):void 0})}function performAndroidPoll(){var result=androidBridge.poll();if(result){var code=result+"";if(code){try{eval(code)}catch(err){window.console&&window.console.error&&window.console.error("android poll failed to evaluate "+code+", "+err)}performAndroidPoll()}}}function setupIOSLogging(){kik._.onLog(function(a,b){try{makeBridgeCall(PLUGIN_LOG,{level:a,message:b})}catch(c){}})}function bridgeFunctionCall(a,b,c){var d=makeBridgeCall(a,b,c);if(!d)throw Error("bridge call "+a+" did not return");if(!d.status||d.status<200||d.status>=300)throw Error("bridge call "+a+" did not complete successfully, "+d.status);if("object"!=typeof d.data)throw TypeError("bridge call "+a+" did not return an object, "+d.data);return d.data}function setupFunction(a){return function(b,c){return bridgeFunctionCall(a,b,c)}}function setupFunctions(a,b,c){if(!Array.isArray(b))throw TypeError("functions "+b+" must be an array");"undefined"==typeof c&&(c={}),b.forEach(function(b){if("string"!=typeof b)throw TypeError("function "+b+" must be a string");c[b]=setupFunction(a+"."+b)})}function setupPlugin(a){var b=kik.events(),c=makeBridgeCall(PLUGIN_REQUEST_NAME,{name:a,eventCallback:setupEventCallback(b.trigger)});if(200!==c.status)throw TypeError("plugin "+a+" failed to initialize");return setupFunctions(a,c.data.functions,b),b}function bridge(a){if("string"!=typeof a)throw TypeError("plugin name must be a string, got "+a);if(!plugins[a]){var b=setupPlugin(a);plugins[a]=b}return plugins[a]}function batchRequest(a){if(!Array.isArray(a))throw TypeError("batch calls must be an array, got "+a);if(a.forEach(function(a){if("object"!=typeof a)throw TypeError("batch call must be an object, got "+a);if("string"!=typeof a.name)throw TypeError("batch call name must be a string, got "+a.name);switch(typeof a.args){case"undefined":case"object":break;default:throw TypeError("batch call args must be an object if defined, got "+a.args)}switch(typeof a.callback){case"function":case"undefined":break;default:throw TypeError("batch call callback must be a function if defined, got "+a.callback)}}),androidBridge)return a.map(function(a){try{return-1===a.name.indexOf(".")?bridge(a.name):bridgeFunctionCall(a.name,a.args,a.callback)}catch(b){}});var b=[],c=new Array(a.length);return a.forEach(function(a,d){var e=-1===a.name.indexOf(".");e?plugins[a.name]?c[d]=plugins[a.name]:b.push(generatePluginBatchSegment(a,function(a){c[d]=a})):b.push(generateBatchSegment(a,function(a){c[d]=a}))}),sendBatchIFrameSignal(b),c}function generateBatchSegment(a,b){var c,d=JSON.stringify(a.args);a.callback&&(c=setupAsyncCallback(a.callback));var e=kik.utils.random.name("PICARD_BRIDGE_CALLBACK");setTimeout(function(){delete window[e]},0),window[e]=function(a,d){delete window[e],c&&202!==a&&delete window[c],a>=200&&300>a&&b(d)};var f=BRIDGE_SIGNAL_URL+a.name+"/"+e+"?args="+encodeURIComponent(d)+"&async="+(c||"");return f}function generatePluginBatchSegment(a,b){var c=kik.events(),d=JSON.stringify({name:a.name,eventCallback:setupEventCallback(c.trigger)}),e=kik.utils.random.name("PICARD_BRIDGE_CALLBACK");setTimeout(function(){delete window[e]},0),window[e]=function(d,f){delete window[e],200===d&&(setupFunctions(a.name,f.functions,c),plugins[a.name]=c,b(c))};var f=BRIDGE_SIGNAL_URL+PLUGIN_REQUEST_NAME+"/"+e+"?args="+encodeURIComponent(d)+"&async=";return f}function redirectToCards(){var a=kik.utils.platform.os,b=kik.utils.url;if(b.query.kikme&&(a.ios||a.android))try{var c=document.createElement("iframe");c.src="card"+b.updateQuery({kikme:null}).substr(4),c.style.display="none";var d=function(){try{document.documentElement.removeChild(c)}catch(a){}};c.onload=d,c.onerror=d,setTimeout(d,1e3),document.documentElement.appendChild(c)}catch(e){}}function main(){var a=getBridge();return a?(kik._.bridge=bridge,kik._.bridge.batch=batchRequest,androidBridge?(setupAndroidPoll(),kik._.bridge.forceAndroidPoll=performAndroidPoll):setupIOSLogging(),kik.enabled=!0,bridge.info=a,bridge.version=a.version,kik.utils.platform.browser.name="kik",kik.utils.platform.browser.cards=!0,kik.utils.platform.browser.kik=!0,kik.utils.platform.browser.version=window.parseFloat(bridge.version),void(kik.utils.platform.browser.versionString=bridge.version)):void redirectToCards()}var BRIDGE_SIGNAL_URL=window.location.protocol+"//cardsbridge.kik.com/",PLUGIN_REQUEST_BATCH="batch-call",PLUGIN_REQUEST_NAME="requestPlugin",PLUGIN_REQUEST_VERSION="requestVersion",PLUGIN_LOG="log",plugins={},os=kik.utils.platform.os,androidBridge=window.CardsBridge;main()}(window,document,kik),function(a,b){function c(){var c=!0;return b.enabled&&b.utils.platform.os.android?Array.prototype.forEach.call(a.getElementsByTagName("meta"),function(a){a.name===g&&"false"===a.content&&(c=!1)}):c=!1,c}function d(){var b=a.documentElement;e(b,"translate3d(0,0,0)"),setTimeout(function(){f(b,"transform 10ms linear"),setTimeout(function(){e(b,"translate3d(0,0,1px)"),setTimeout(function(){f(b,""),setTimeout(function(){e(b,"")},0)},10)},0)},0)}function e(a,b){a.style["-webkit-transform"]=b,a.style["-moz-transform"]=b,a.style["-ms-transform"]=b,a.style["-o-transform"]=b,a.style.transform=b}function f(a,b){b?(a.style["-webkit-transition"]="-webkit-"+b,a.style["-moz-transition"]="-moz-"+b,a.style["-ms-transition"]="-ms-"+b,a.style["-o-transition"]="-o-"+b,a.style.transition=b):(a.style["-webkit-transition"]="",a.style["-moz-transition"]="",a.style["-ms-transition"]="",a.style["-o-transition"]="",a.style.transition="")}var g="kik-transform-fix";c()&&d()}(document,kik),function(a,b){try{var c=a.querySelector('meta[name="viewport"]');b.enabled&&c&&/\bipad\b/i.test(navigator.userAgent)&&c.setAttribute("content","initial-scale=1.0, maximum-scale=1.0, user-scalable=no")}catch(d){}}(document,kik),function(a,b){b._.bridge&&(a.alert=function(){},a.confirm=function(){},a.prompt=function(){})}(window,kik),function(a,b,c){var d=c.utils.platform.os,e=c.utils.platform.browser;a.navigator&&e.kik&&e.version<6.7&&d.android&&(a.navigator.geolocation=void 0)}(window,document,kik),function(a){var b={};if(a._.firstBatch=b,a._.bridge&&a.utils.platform.os.ios&&!(a.utils.platform.browser.version<6.5)){var c=[{name:"Metrics"},{name:"Browser"},{name:"Media"},{name:"Kik"},{name:"Profile"},{name:"UserData"},{name:"Auth"},{name:"Photo"},{name:"Keyboard"},{name:"Push"},{name:"Picker"}],d=[{name:"Browser.getLastLinkData",args:{}},{name:"Browser.isPopupMode",args:{}},{name:"Kik.getLastMessage",args:{}},{name:"Push.getNotificationList",args:{}},{name:"Picker.getRequest",args:{}}];a._.bridge.batch(c.concat(d)).slice(c.length).forEach(function(c,e){var f=d[e];b[f.name]=c,c&&(a._.secondBatch||(a._.secondBatch=[]))})}}(kik),function(a,b){function c(a,b,c){n||(n=!0,a&&(c?e(a):d(a,b)),f())}function d(c,d){if("string"!=typeof c)throw TypeError("google analytics ID must be a string, got "+c);if("string"!=typeof d)throw TypeError("google analytics host must be a string, got "+d);a.GoogleAnalyticsObject="ga",a.ga=a.ga||function(){(a.ga.q=a.ga.q||[]).push(arguments)},a.ga.l=+new Date,b.ready(function(){var a=document.createElement("script"),b=document.getElementsByTagName("script")[0];a.async=1,a.src="//www.google-analytics.com/analytics.js",b.parentNode.insertBefore(a,b)}),a.ga("create",c,d),a.ga("send","pageview")}function e(c){if("string"!=typeof c)throw TypeError("google analytics ID must be a string, got "+c);var d=a._gaq=[];d.push(["_setAccount",c]),d.push(["_trackPageview"]),b.ready(function(){var a=document.createElement("script");a.async=!0,a.defer=!0,a.id="ga",a.src="//www.google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})}function f(){a.addEventListener("error",function(b){var c=b.message||"";c+=" ("+(b.filename||a.location.href),b.lineno&&(c+=":"+b.lineno),c+=")",h("error",c)},!1),"object"==typeof App&&"function"==typeof App.enableGoogleAnalytics&&App.enableGoogleAnalytics(),j&&(i("loadTime"),i("coverTime"));var b=m.slice();m=null,b.forEach(function(a){g(a[0],a[1],a[2],a[3])})}function g(b,c,d,e){if("string"!=typeof b)throw TypeError("event category must be a string, got "+b);if("string"!=typeof c)throw TypeError("event name must be a string, got "+c);switch(typeof d){case"string":break;case"number":e=d;default:d=""}switch(typeof e){case"number":e=Math.floor(e);break;default:e=0}return m?void m.push([b,c,d,e]):void("function"==typeof a.ga?a.ga("send","event",b,c,d,e):(a._gaq||(a._gaq=[]),"function"==typeof a._gaq.push&&a._gaq.push(["_trackEvent",b,c,d,e,!0])))}function h(a,b,c){g("Cards",a,b,c)}function i(a){l[a]?h(a,l[a]):l.once(a,function(){h(a,l[a])})}var j;try{j=b._.bridge("Metrics")}catch(k){}var l=b.events(),m=[];b.metrics=l,l.loadTime=null,l.coverTime=null,j&&j.on("loadData",function(a){"number"==typeof a.loadTime&&(l.loadTime=a.loadTime,l.trigger("loadTime",a.loadTime)),"number"==typeof a.coverTime&&(l.coverTime=a.coverTime,l.trigger("coverTime",a.coverTime))});var n=!1;l.enableGoogleAnalytics=c,l.event=g,l._cardsEvent=h}(window,kik),function(a,b,c){function d(b,c){function d(){g||(g=!0,!b&&a.console&&a.console.log&&(a.console.log("refresh requested but no update to manifest found"),a.console.log("** update your manifest to see changes reflected")),setTimeout(function(){c(!0)},1e3))}function e(){if(!g){g=!0;var a=!1;if(f.status===f.UPDATEREADY)try{f.swapCache(),a=!0}catch(b){}c(a)}}var f=a.applicationCache,g=!1;if(!(f&&f.addEventListener&&f.swapCache&&f.update))return void c(!1);if(f.status===f.UPDATEREADY)return void e();if(f.status!==f.IDLE&&f.status!==f.CHECKING&&f.status!==f.DOWNLOADING)return void c(!1);if(f.addEventListener("noupdate",d,!1),f.addEventListener("updateready",e,!1),f.addEventListener("error",e,!1),f.addEventListener("obsolete",e,!1),setTimeout(e,3e4),f.status===f.IDLE)try{f.update()}catch(h){e()}}function e(){try{a.ZERVER_KILL_STREAM()}catch(b){}}function f(a){if("string"!=typeof a)return void 0;a=decodeURIComponent(a);var b;try{b=JSON.parse(a)}catch(c){}return"object"==typeof b&&null!==b?b:a||void 0}function g(){var c=!1;if(Array.prototype.forEach.call(b.getElementsByTagName("meta"),function(a){"kik-https"===a.name&&(c=a.content)}),c===a.location.host)if("https:"===a.location.protocol)try{k.performHttpsUpgradeCleanup()}catch(d){}else try{k.openCard({url:a.location.href.split("#")[0].replace(/^http\:/,"https:"),title:b.title,icon:n,clearHistory:!0})}catch(d){a.location.href=a.location.href.replace(/^http\:/,"https:")}}function h(a,b){m.linkData=f(a&&a.data),c.linkData=m.linkData,b!==!1&&m.linkData&&(m.trigger("linkData",m.linkData),c.trigger("linkData",m.linkData))}function i(){return B||C}function j(){var a=A;A=i(),m.background=A,a!==A&&m.trigger(A?"background":"foreground")}c.utils.platform.os.ios&&setTimeout(function(){d(!0,function(){})},5e3),a.ZERVER_REFRESH=function(){e(),d(!0,function(){a.location.reload()})},a.location.hash&&(c.linkData=f(a.location.hash.substr(1))),g();var k;try{k=c._.bridge("Browser")}catch(l){return}var m=c.events();c.browser=m;var n;if(k.setCardInfo){var o,p,q,r,s,t,u=/(^|\s)icon(\s|$)/i;Array.prototype.forEach.call(b.getElementsByTagName("link"),function(a){u.test(a.rel)?o=a.href:"kik-icon"===a.rel?q=a.href:"kik-icon-fallback"===a.rel?p=a.href:"kik-tray-icon"===a.rel?r=a.href:"privacy"===a.rel?s=a.href:"terms"===a.rel&&(t=a.href)}),n=p||q||r||o;var v={title:b.title,icon:n,squareIcon:q||r||p||o,mediaTrayIcon:q||r||p||o,privacy:s,terms:t};c._.secondBatch?c._.secondBatch.push({name:"Browser.setCardInfo",args:v}):k.setCardInfo(v)}k.pageLoaded&&c.utils.windowReady(function(){if(b.body){var a=b.body.offsetWidth;!function(a){return a}(a)}setTimeout(function(){k.pageLoaded()},1)}),a.addEventListener("unload",function(){try{k.navigationAttempted()}catch(a){}},!1);var w=!0;if(k.setStatusBarVisible){var x=!1;m.statusBar=function(a){x=!0,k.setStatusBarVisible({visible:!!a}),w=!!a}}if(k.setStatusBarTransparent){m.statusBarTransparent=function(a){var b;"black"===a?b=!1:a&&(b=!0);try{if(k.setStatusBarTransparent({transparent:!!a,light:b}))return!0}catch(c){}return!1};var y;if(Array.prototype.forEach.call(b.getElementsByTagName("meta"),function(a){"kik-transparent-statusbar"===a.name&&(y=(a.content||"").trim())}),y&&"false"!==y&&m.statusBarTransparent(y)){a.APP_ENABLE_IOS_STATUSBAR=!0;try{"function"==typeof App._enableIOSStatusBar&&App._enableIOSStatusBar()}catch(l){}}}k.getOrientationLock&&k.setOrientationLock&&(m.getOrientationLock=function(){var a=k.getOrientationLock().position;return"free"===a?null:a},m.setOrientationLock=function(a){switch(a){case"free":case"portrait":case"landscape":break;default:if(!a){a="free";break}throw TypeError("if defined, position "+a+' must be one of "free", "portrait", or "landscape"')}try{return k.setOrientationLock({position:a}),!x&&k.setStatusBarVisible&&w!==("landscape"!==a)&&(k.setStatusBarVisible({visible:"landscape"!==a}),w="landscape"!==a),!0
}catch(b){return!1}}),k.on("orientationChanged",function(){try{a.App._layout()}catch(b){}}),k.setBacklightTimeoutEnabled&&(m.backlightTimeout=function(a){k.setBacklightTimeoutEnabled({enabled:!!a})}),k.forceRepaint&&(m.paint=function(){if(b.body){var a=b.body.offsetWidth;!function(a){return a}(a)}k.forceRepaint()});var z=[];m.back=function(a){if("function"!=typeof a)throw TypeError("back handler "+a+" must be a function");z.push(a)},m.unbindBack=function(a){if("function"!=typeof a)throw TypeError("back handler "+a+" must be a function");for(var b=z.length;b--;)z[b]===a&&z.splice(b,1)},k.on("back",function(a){for(var b=!1,d=z.length;d--;)try{if(z[d]()===!1){b=!0;break}}catch(e){c.utils.error(e)}k.handleBack({requestToken:a.requestToken,override:b})}),m.back(function(){if(a.App&&"function"==typeof a.App.back)try{if(App.back()!==!1)return!1}catch(b){}}),k.refresh&&k.refreshPlanned&&(m.refresh=function(){var b=a.applicationCache;return e(),b&&b.status!==b.UNCACHED?void d(!1,function(){k.refresh({withCache:!0})}):void k.refresh({withCache:!1})},k.on("refresh",function(){setTimeout(function(){k.refreshPlanned(),m.refresh()},0)}),a.ZERVER_REFRESH=function(){m.refresh()}),m.open=c.open,m._processLinkData=h,k.getLastLinkData&&h(c._.firstBatch["Browser.getLastLinkData"]||k.getLastLinkData(),!1),k.on("linkData",h),k.on("statusBarTap",function(){m.trigger("statusBarTap")});var A=!0,B=!1,C=!0;m.background=A,k.on("pause",function(){B=!0,j()}),k.on("unpause",function(){B=!1,j()}),k.on("conceal",function(){C=!0,j()}),k.on("reveal",function(){C=!1,j()})}(window,document,kik),function(a,b,c){function d(){var a=!1;Array.prototype.forEach.call(b.getElementsByTagName("meta"),function(b){"kik-media-enabled"===b.name&&"true"===b.content&&(a=!0)}),e(a)}function e(a){if(c._.secondBatch)c._.secondBatch.push({name:"Media."+(a?"":"un")+"setMediaCategory",args:{}});else try{a?f.setMediaCategory():f.unsetMediaCategory()}catch(b){}}var f;try{f=c._.bridge("Media")}catch(g){}f&&f.setMediaCategory&&f.unsetMediaCategory?(c._mediaEnabled=e,d()):c._mediaEnabled=function(){}}(window,document,kik),function(a,b,c){function d(a){var b;if("object"!=typeof a)throw TypeError("message "+a+" must be an object");switch(typeof a.big){case"undefined":case"boolean":break;default:throw TypeError("message size (big) "+a.big+" must be a boolean if defined")}switch(typeof a.title){case"undefined":case"string":if(!a.big&&!a.title)throw TypeError("message title must be a string");a.title=a.title||"";break;default:throw TypeError("message title "+a.title+" must be a string")}switch(typeof a.text){case"string":case"undefined":break;default:throw TypeError("message text "+a.text+" must be a string")}switch(typeof a.pic){case"undefined":case"string":break;default:throw TypeError("message pic "+a.pic+" must be a string if defined")}switch(typeof a.noForward){case"undefined":case"boolean":break;default:throw TypeError("message noForward flag must be a boolean if defined, got "+a.noForward)}switch(typeof a.fallback){case"undefined":case"string":break;default:throw TypeError("message fallback URL must be a string if defined, got "+a.fallback)}switch(typeof a.linkData){case"undefined":case"string":break;case"object":try{b=JSON.stringify(a.linkData)}catch(d){throw TypeError("message linkData must be a string or JSON if defined, got "+a.linkData)}break;default:throw TypeError("message linkData must be a string or JSON if defined, got "+a.linkData)}var e=b||a.linkData;"string"==typeof e&&(e=encodeURIComponent(e));var b;switch(typeof a.data){case"object":if(null!==a.data)try{b=JSON.stringify(a.data)}catch(d){throw TypeError("message data must be a json object if defined, got "+a.data)}case"undefined":break;default:throw TypeError("message data must be a json object if defined, got "+a.data)}var f;return"object"==typeof a.data&&null!==a.data&&a.data.id&&(f=a.data.id+""),c.metrics._cardsEvent("kikSend",f),{title:a.title,text:a.text,image:a.pic,forwardable:!a.noForward,fallbackUrl:a.fallback,layout:a.big?"photo":"article",extras:{sender:c._.id,dataID:f,messageID:c.utils.random.uuid(),linkData:e||"",jsonData:b||""}}}function e(a,b){if(f(),a.extras.sender&&a.extras.sender===c._.id||c.metrics._cardsEvent("kikReceive",a.extras.dataID),a.extras.jsonData){var d;try{d=JSON.parse(a.extras.jsonData)}catch(e){}"object"==typeof d&&null!==d&&(c.message=d,i.trigger(d),c.trigger("message",d))}a.extras&&a.extras.linkData&&c.browser&&c.browser._processLinkData&&c.browser._processLinkData({data:a.extras.linkData},b)}function f(){g.openConversation&&(c.returnToConversation=function(a){return c.returnToConversation=null,a?(a=d(a),a.returnToSender=!0,void g.sendKik(a)):void g.openConversation({returnToSender:!0})})}var g;try{g=c._.bridge("Kik")}catch(h){return}c.kik=c,c._formatMessage=d,c.send=function(a,b){"string"!=typeof a&&(b=a,a=void 0),b=d(b),b.targetUser=a,a&&g.sendKikToUser?g.sendKikToUser(b):g.sendKik(b)};var i=c.events.handlers();if(c.handler=function(a){return i.handler(a)},g.getLastMessage){var j=c._.firstBatch["Kik.getLastMessage"]||g.getLastMessage();j&&j.message&&e(j.message,!1)}g.on("message",e),g.openConversationWithUser&&(c.openConversation=function(a,b){g.openConversationWithUser({username:a},function(a){b&&b(a)})})}(window,document,kik),function(a,b,c){var d;try{d=c._.bridge("Profile")}catch(e){return}c.kik=c,d.openProfile&&(c.showProfile=function(a){if("string"!=typeof a)throw TypeError("username must be a string, got "+a);try{d.openProfile({username:a})}catch(b){}})}(window,document,kik),function(a,b,c){function d(a){if(!a)return void 0;a.fullName=a.displayName||"";var b=a.fullName.indexOf(" ");return-1===b?(a.firstName=a.fullName,a.lastName=""):(a.firstName=a.fullName.substr(0,b),a.lastName=a.fullName.substr(b+1)),delete a.displayName,a.pic=e(a.pic),a.thumbnail=e(a.thumbnail),a}function e(a){if("string"!=typeof a)return a;var b=a.replace(/^https?\:\/\/[^\/]*/,"");return"//d33vud085sp3wg.cloudfront.net"+b}function f(a,b){a.minResults=a.minResults||1,h.pickFilteredUsers({minResults:a.minResults,maxResults:a.maxResults,filtered:a.filtered,filterSelf:a.filterSelf},function(c){if(!c||!c.userDataList)return void b();var e=c.userDataList.map(d);a.filtered&&(e=e.filter(function(b){return-1===a.filtered.indexOf(b.username)})),b(e)})}function g(a,b){var e=!1;a.preselected&&a.preselected.length||(a.minResults=a.minResults||1);var f={},g=[];a.preselected.forEach(function(a){f[a.username]=a,g.push(a.username)}),h.pickUsers({minResults:a.minResults,maxResults:a.maxResults,preselected:g,filterSelf:a.filterSelf},function(c){if(!e){if(!c||!c.userDataList)return e=!0,void b();var g=c.userDataList.map(function(a){return a.username in f?f[a.username]:d(a)});a.filtered&&(g=g.filter(function(b){return-1===a.filtered.indexOf(b.username)})),e=!0,b(g)}});var i=c.utils.platform.os,j=c.utils.platform.browser;i.ios&&j.kik&&j.version<6.5&&c.browser.once("foreground",function(){setTimeout(function(){e||(e=!0,b())},0)})}var h;try{h=c._.bridge("UserData")}catch(i){return}c.kik=c;var j;h.getUserData&&(c.getUser=function(a){switch(typeof a){case"undefined":a=function(){};case"function":break;default:throw TypeError("callback must be a function if defined, got "+a)}if(j)return void a(j);var b=c.hasPermission(),e=c.utils.platform.os;h.getUserData({fields:["profile"]},function(f){var g=d(f&&f.userData);g&&(j=g,b||c.trigger("permission")),e.ios&&!b?setTimeout(function(){a(g)},600):a(g)})}),c.hasPermission=function(){try{return!!h.checkPermissions({fields:["profile"]}).permitted}catch(a){return!1}},(h.pickUsers||h.pickFilteredUsers)&&(c.pickUsers=function(a,b){switch(typeof a){case"function":b=a;case"undefined":a={};case"object":break;default:throw TypeError("options must be an object if defined, got "+a)}if("function"!=typeof b)throw TypeError("callback must be a function, got "+b);switch(typeof a.preselected){case"undefined":a.preselected=[];break;default:if(!Array.isArray(a.preselected))throw TypeError("preselected users must be an array of users if defined, got "+a.preselected);a.preselected.forEach(function(a){if("object"!=typeof a)throw TypeError("user must be an object, got "+a);if("string"!=typeof a.username)throw TypeError("user.username must be a string, got "+a.username)})}switch(typeof a.filtered){case"undefined":a.filtered=[];break;default:if(!Array.isArray(a.filtered))throw TypeError("filtered users must be an array of users if defined, got "+a.filtered);a.filtered=a.filtered.map(function(a){switch(typeof a){case"string":return a;case"object":if(null!==a&&"string"==typeof a.username)return a.username;default:throw TypeError("filtered user didnt have a username, got "+a)}})}switch(typeof a.filterSelf){case"undefined":a.filterSelf=!0;case"boolean":break;default:throw TypeError("filterSelf must be a boolean if defined, got "+a.filterSelf)}switch(typeof a.minResults){case"undefined":break;case"number":if(a.minResults<0)throw TypeError("minResults must be non-negative if defined, got "+a.minResults);break;default:throw TypeError("minResults must be a number if defined, got "+a.minResults)}switch(typeof a.maxResults){case"undefined":break;case"number":if(a.maxResults<1)throw TypeError("maxResults must be greater than 1 if defined, got "+a.maxResults);break;default:throw TypeError("maxResults must be a number if defined, got "+a.maxResults)}switch(typeof b){case"undefined":b=function(){};break;case"function":break;default:throw TypeError("callback must be a function if defined, got "+b)}if(a.preselected.length&&a.filtered.length)throw TypeError("can only preselect or filter users, not both");h.pickFilteredUsers&&!a.preselected.length?f(a,b):g(a,b)})}(window,document,kik),function(a,b,c){function d(b,d,f){var g=c.hasPermission();e.signRequest({request:b,skipPrompt:f},function(b){if(b&&b.signedRequest){g||c.trigger("permission");var e=b.host||a.location.host;d(b.signedRequest,b.username,e)}else d()})}var e;try{e=c._.bridge("Auth")}catch(f){}e&&e.signRequest&&(c.kik=c,c.sign=function(a,b,e){if("string"!=typeof a)throw TypeError("data to be signed must be a string, got "+a);if("function"!=typeof b)throw TypeError("callback must be a function, got "+b);e=!!e;var f=c.utils.platform.os,g=c.utils.platform.browser;f.android&&g.version<6.5?c.ready(function(){d(a,b,e)}):d(a,b,e)},e.getAnonymousId&&(c.getAnonymousUser=function(a){e.getAnonymousId(function(b){b&&b.anonymousId?a(b.anonymousId):a()})}),e.signAnonymousRequest&&(c.anonymousSign=function(a,b){if("string"!=typeof a)throw TypeError("data to be signed must be a string, got "+a);if("function"!=typeof b)throw TypeError("callback must be a function, got "+b);e.signAnonymousRequest({request:a},function(a){a&&a.signedRequest?b(a.signedRequest,a.anonymousId,a.host):b()})}))}(window,document,kik),function(a,b,c){function d(a,b){switch(typeof b){case"undefined":case"function":break;default:throw TypeError(a+" must be a function if defined, got "+b)}}function e(a,b,c,d){switch(typeof b){case"undefined":break;case"number":if(c>b||b>d)throw TypeError(a+" must be within "+c+" and "+d+" if defined, got "+b);break;default:throw TypeError(a+" must be a number if defined, got "+b)}}function f(a,b,f){function h(a){if(!r){r=!0,l=a&&a.photoIds;var b=l&&l.length;if(!b)return k(o),void k(f);k(n,b),m=new Array(b),g.on("photo",i)}}function i(a){if(a){var b=l.indexOf(a.id);if(-1!==b){a.url=a.url||null,l[b]=null,m[b]=a.url;for(var c=0,d=0,e=l.length;e>d;d++)null!==l[d]&&c++;k(p,a.url,b),0===c&&j()}}}function j(){g.off("photo",i),k(q,m),k(f,m)}function k(a,b,d){if(a)try{a(b,d)}catch(e){c.utils.error(e)}}switch("string"!=typeof a&&(f=b,b=a,a=void 0),typeof b){case"function":f=b,b={};case"object":break;default:throw TypeError("options must be an object, got "+b)}d("callback",f),d("onCancel",b.onCancel),d("onSelect",b.onSelect),d("onPhoto",b.onPhoto),d("onComplete",b.onComplete),e("quality",b.quality,0,1),e("minResults",b.minResults,0,25),e("maxResults",b.maxResults,1,25),e("maxHeight",b.maxHeight,0,1280),e("maxWidth",b.maxWidth,0,1280);var l,m,n=b.onSelect,o=b.onCancel,p=b.onPhoto,q=b.onComplete,r=!1,s=c.utils.platform.os,t=c.utils.platform.browser;0===b.minResults&&(b.minResults=1),g.getPhoto({source:a,quality:b.quality,minResults:b.minResults,maxResults:b.maxResults,maxHeight:b.maxHeight,maxWidth:b.maxWidth,autoSave:b.saveToGallery},h),s.android&&t.version<6.7&&c.browser.once("foreground",function(){setTimeout(function(){r||(r=!0,k(o),k(f))},0)})}var g;try{g=c._.bridge("Photo")}catch(h){return}var i=c.events();c.photo=i,g.getPhoto&&(i.get=function(a,b){f(a,b)},i.getFromCamera=function(a,b){f("camera",a,b)},i.getFromGallery=function(a,b){f("gallery",a,b)}),g.savePhoto&&(i.saveToGallery=function(a,b){function c(a){c=function(){},b(a)}switch(typeof b){case"undefined":b=function(){};case"function":break;default:throw TypeError("callback must be a function, got "+b)}try{g.savePhoto({url:a},function(a){c(!!a)})}catch(d){c(!1)}})}(window,document,kik),function(a,b,c){function d(){var a;Array.prototype.forEach.call(b.getElementsByTagName("meta"),function(b){b.name===k&&(a=(b.content||"").trim())}),"true"===a&&(l.kik&&l.version<=6.5?c.ready(function(){g(!1)}):g(!1))}function e(){g(!1)}function f(){g(!0)}function g(a){if(c._.secondBatch)c._.secondBatch.push({name:"Keyboard.setFormNavigationEnabled",args:{enabled:a}});else try{i.setFormNavigationEnabled({enabled:a})}catch(b){}}function h(){try{return!!i.isFormNavigationEnabled().enabled}catch(a){return!!c.utils.platform.os.ios}}var i;try{i=c._.bridge("Keyboard")}catch(j){}var k="kik-hide-form-helpers",l=c.utils.platform.browser;d(),c.formHelpers={show:f,hide:e,isEnabled:h}}(window,document,kik),function(a,b,c){function d(a,b,c){if("string"!=typeof a)throw TypeError("picker url must be a string, got "+a);switch(typeof b){case"function":c=b;case"undefined":b={};case"object":break;default:throw TypeError("picker options must be an object if defined, got "+b)}if("function"!=typeof c)throw TypeError("picker callback must be a function, got "+c);e.startRequest({requestUrl:a,requestData:b},function(a){c(a&&a.responseData)})}var e;try{e=c._.bridge("Picker")}catch(f){return}if(e.startRequest){var g=c.events(d);if(c.picker=g,e.getRequest&&e.completeRequest){var h,i;try{h=(c._.secondBatch?c._.firstBatch["Picker.getRequest"]:e.getRequest()).requestData}catch(f){}h&&b.referrer&&(i=!(!h.kik||"https://kik.com/"!==b.referrer.split("?")[0]),g.url=b.referrer,g.data=h,g.fromKik=i,g.reply=function(a){i&&a&&(a=c._formatMessage(a));try{e.completeRequest({responseData:a})}catch(b){}},g.cancel=function(){try{e.cancelRequest()}catch(a){}g.isPopup||(g.url=void 0,g.data=void 0,g.reply=void 0,g.cancel=void 0,g.trigger("cancel"))})}try{g.isPopup=c._.firstBatch&&c._.firstBatch["Browser.isPopupMode"]?c._.firstBatch["Browser.isPopupMode"].popup:c._.bridge("Browser").isPopupMode().popup}catch(f){g.isPopup=!1}}}(window,document,kik),function(a,b,c){var d;try{d=c._.bridge("Push")}catch(e){return}var f=c.events();if(c.push=f,d.setBadgeVisibility&&(f.badge=function(a){d.setBadgeVisibility({visible:!!a,blue:!0}),f.trigger("badge",!!a)}),d.getPushToken&&(f.getToken=function(a){if("function"!=typeof a)throw TypeError("callback must be a function, got "+a);d.getPushToken(function(b){a(b&&b.token)})}),d.getNotificationList){var g=c.events.handlers(),h=function(){var a;try{a=c._.firstBatch&&c._.firstBatch["Push.getNotificationList"]?c._.firstBatch["Push.getNotificationList"]:d.getNotificationList()}catch(b){}var e=c.picker&&c.picker.isPopup,h=!0;if(e)f.once("badge",function(){h=!1});else{h=!1;try{d.setBadgeVisibility({visible:!1}),f.trigger("badge",!1)}catch(b){}}var i=[];if(a&&a.notifications)for(var j=0,k=a.notifications.length;k>j;j++)if("object"==typeof a.notifications[j])switch(typeof a.notifications[j].data){case"object":i.push(a.notifications[j].data);break;case"string":try{var l=JSON.parse(a.notifications[j].data);"object"==typeof l&&i.push(l)}catch(b){}}if(i.length?(g.triggerMulti(i),i.forEach(function(a){f.trigger("push",a)})):h=!1,h)try{d.setBadgeVisibility({visible:!0,blue:!0}),f.trigger("badge",!0)}catch(b){}};f.handler=function(a){return g.handler(a)},d.on("notificationReceived",function(){var a=c.utils.platform;a.os.ios&&a.browser.version<6.4?setTimeout(h,0):h()}),h()}}(window,document,kik),function(a,b,c){function d(b,c){function d(d){var e;try{e=d.items}catch(h){}e&&Array.isArray(e)||(e=[]);var j;try{j=g.getTransactionList({skus:b}).transactions}catch(h){j=[]}j.forEach(function(b){if(!b.sku)try{b.sku=JSON.parse(a.atob(b.content.split(".")[1])).item.sku}catch(c){}}),i.init=null,i.complete=f,i.items=e,i.pending=j,"function"==typeof c&&c()}if("string"==typeof arguments[0]&&(b=Array.prototype.slice.call(arguments)),!Array.isArray(b))throw TypeError("list of SKUs must be an array");if(b.forEach(function(a){if("string"!=typeof a)throw TypeError("SKU must be a string, got "+a)}),"function"==typeof c)if(g.getAvailableItemsAsynchronously)g.getAvailableItemsAsynchronously({skus:b},d);else{var e;try{e=g.getAvailableItems({skus:b})}catch(h){}d(e)}else if(g.getAvailableItems){var e;try{e=g.getAvailableItems({skus:b})}catch(h){}d(e)}else d()}function e(a,b,c,d){switch(typeof a){case"object":if(null===a)throw TypeError("SKU must be a string, got "+a);if("string"!=typeof a.sku)throw TypeError("SKU must be a string, got "+a.sku);a=a.sku;case"string":break;default:throw TypeError("SKU must be a string, got "+a)}var e=i.items.map(function(a){return a.sku}).indexOf(a);if(-1===e)throw TypeError("SKU not available, got "+a);switch(typeof b){case"boolean":c=b,b=void 0;case"function":d=c,c=b;case"undefined":b={};case"object":break;default:throw TypeError("purchase data must be a JSON object if defined, got "+b)}switch(typeof c){case"boolean":d=c;case"undefined":c=function(){};case"function":break;default:throw TypeError("purchase callback must be a function if defined, got "+c)}switch(typeof d){case"undefined":d=!1;case"boolean":break;default:throw TypeError("skipPrompt must be a boolean if defined, got "+d)}g.purchase({sku:a,data:b,skipPrompt:d},function(a){return a?a.transaction?(i.pending.push(a.transaction),void c(a.transaction)):void c():void c(void 0,!0)})}function f(a){if("string"!=typeof a)throw TypeError("transactionId must be a string, got "+a);g.markTransactionStored({transactionId:a});for(var b=i.pending.length;b--;)i.pending[b].transactionId===a&&i.pending.splice(b,1)}var g;try{g=c._.bridge("IAP")}catch(h){return}if(g.purchase&&g.markTransactionStored&&g.getTransactionList){var i=c.events(e);i.init=d,c.purchase=i}}(window,document,kik),function(a,b,c){function d(){var a=c.utils.platform.os,b=c.utils.platform.browser;return a.ios&&b.kik&&b.version<6.5}function e(){b.documentElement.addEventListener("click",function(a){if(!a.defaultPrevented&&a.target&&"A"===a.target.nodeName&&a.target.href&&!a.target._clickable){var b=c.browser;if(b)return b.open(a.target.href),a.preventDefault(),!1}})}d()&&e()}(window,document,kik),function(a){delete a._.firstBatch,a._.secondBatch&&(a._.bridge.batch(a._.secondBatch),delete a._.secondBatch)}(kik),function(a,b,c){function d(){if(!c.enabled){var a=c.utils.url;if(!a.query._app_platform){var d="card"+a.updateQuery({kikme:null}).substr(4),e=!!a.query.kikme;e||Array.prototype.forEach.call(b.getElementsByTagName("meta"),function(a){a.name===i&&(a.content||"").trim()&&(e=!0)}),e&&c.ready(function(){c.open.card(d,void 0,!0)})}}}function e(){var a,d=c.utils.platform.os;if(Array.prototype.forEach.call(b.getElementsByTagName("meta"),function(b){b.name===j&&(a=(b.content||"").trim())}),!a)return!0;for(var e=!0,g=a.split(","),h=0,i=g.length;i>h;h++){var k=g[h].trim(),l=f(k);k&&l&&(l.ios&&d.ios?d.version<l.version+1&&(e=!1):l.android&&d.android&&d.version<=l.version&&(e=!1))}return e}function f(a){var b=-1,c=!1,d=!1;if(0===a.indexOf("android-")){if(d=!0,b=parseFloat(a.replace("android-","")),b>=2.3)return g(a)}else{if(0!==a.indexOf("ios-"))return g(a);if(c=!0,b=parseFloat(a.replace("ios-","")),b>=5)return g(a)}return{ios:c,android:d,version:b}}function g(b){return a.console&&a.console.error&&a.console.error('"'+b+'" is an unsupported value for the "'+j+'" meta tag'),!1}function h(){function d(){g.style.height=screen.height+"px",g.style.width=screen.width+"px",g.style["max-height"]=screen.height+"px",g.style["max-width"]=screen.width+"px",j.style.height=screen.height+"px",j.style.width=screen.width+"px",k.style.height=screen.height+"px",k.style.width=screen.width+"px",l.style.width=screen.width+"px",l.style.top=.15*screen.height+"px",n.style.width=.65*screen.width+"px",o.style.width=.65*screen.width+"px"}if(!e()){var f=c.utils.platform.os,g=b.documentElement;Array.prototype.forEach.call(g.childNodes,function(a){g.removeChild(a)}),g.style["min-height"]="0",g.style["min-width"]="0",g.style.height="0",g.style.width="0",g.style.padding="0",g.style.border="none",g.style.margin="0",g.style.overflow="hidden";var h=b.createElement("head"),i=b.createElement("meta");i.name="viewport",i.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no",h.appendChild(i),g.appendChild(h);var j=b.createElement("body");j.style.margin="0",j.style.padding="0";var k=b.createElement("div");k.style.position="absolute",k.style.top="0",k.style.left="0",k.style.height="0",k.style.width="0",k.style.background="#31333B",k.style.zIndex="100000000000",k.style.fontFamily='"Helvetica Neue", Helvetica, Arial, sans-serif',f.android&&(k.style.fontFamily='"Roboto", sans-serif');var l=b.createElement("div");l.style.position="fixed",l.style.left="0",l.style.zIndex="100000000000";var m=b.createElement("div");m.style.backgroundImage="url('http://cdn.kik.com/cards/unsupported_icon.png')",m.style["background-size"]="100%",m.style.width="100px",m.style.height="100px",m.style.margin="0 auto";var n=b.createElement("div");n.style.color="#E0E0E0",n.style.padding="20px",n.style.textAlign="center",n.style.margin="0 auto",n.style.fontSize="16px",n.innerHTML="Oh no! This website isn't supported on your phone.";var o=b.createElement("div");throw o.style.color="#979799",o.style.padding="0 20px",o.style.textAlign="center",o.style.margin="0 auto",o.innerHTML="This website is not available for your phone. But don't worry! You can still use the Kik Messenger you know and love :)",l.appendChild(m),l.appendChild(n),l.appendChild(o),k.appendChild(l),f.android&&f.version<2.3&&Array.prototype.forEach.call(g.childNodes,function(a){g.removeChild(a)}),j.appendChild(k),g.appendChild(j),g.style["-webkit-user-select"]="none",g.style["user-select"]="none",g.style.background="#31333B",a.onorientationchange=function(a){return a.stopImmediatePropagation&&a.stopImmediatePropagation(),a.preventDefault(),a.stopPropagation(),a.cancelBubble=!0,a.returnValue=!1,!1},setTimeout(d,50),g.addEventListener&&g.addEventListener("resize",d,!1),delete a.kik,TypeError("OS Version is not supported.")}}var i="kik-prefer",j="kik-unsupported";d(),h()}(window,document,kik),!function(a,b){"use strict";function c(){d.READY||(d.event.determineEventTypes(),d.utils.each(d.gestures,function(a){d.detection.register(a)}),d.event.onTouch(d.DOCUMENT,d.EVENT_MOVE,d.detection.detect),d.event.onTouch(d.DOCUMENT,d.EVENT_END,d.detection.detect),d.READY=!0)}var d=function(a,b){return new d.Instance(a,b||{})};d.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},d.HAS_POINTEREVENTS=a.navigator.pointerEnabled||a.navigator.msPointerEnabled,d.HAS_TOUCHEVENTS="ontouchstart"in a,d.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,d.NO_MOUSEEVENTS=d.HAS_TOUCHEVENTS&&a.navigator.userAgent.match(d.MOBILE_REGEX),d.EVENT_TYPES={},d.DIRECTION_DOWN="down",d.DIRECTION_LEFT="left",d.DIRECTION_UP="up",d.DIRECTION_RIGHT="right",d.POINTER_MOUSE="mouse",d.POINTER_TOUCH="touch",d.POINTER_PEN="pen",d.EVENT_START="start",d.EVENT_MOVE="move",d.EVENT_END="end",d.DOCUMENT=a.document,d.plugins=d.plugins||{},d.gestures=d.gestures||{},d.READY=!1,d.utils={extend:function(a,c,d){for(var e in c)a[e]!==b&&d||(a[e]=c[e]);return a},each:function(a,c,d){var e,f;if("forEach"in a)a.forEach(c,d);else if(a.length!==b){for(e=0,f=a.length;f>e;e++)if(c.call(d,a[e],e,a)===!1)return}else for(e in a)if(a.hasOwnProperty(e)&&c.call(d,a[e],e,a)===!1)return},hasParent:function(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1},getCenter:function(a){var b=[],c=[];return d.utils.each(a,function(a){b.push("undefined"!=typeof a.clientX?a.clientX:a.pageX),c.push("undefined"!=typeof a.clientY?a.clientY:a.pageY)}),{pageX:(Math.min.apply(Math,b)+Math.max.apply(Math,b))/2,pageY:(Math.min.apply(Math,c)+Math.max.apply(Math,c))/2}},getVelocity:function(a,b,c){return{x:Math.abs(b/a)||0,y:Math.abs(c/a)||0}},getAngle:function(a,b){var c=b.pageY-a.pageY,d=b.pageX-a.pageX;return 180*Math.atan2(c,d)/Math.PI},getDirection:function(a,b){var c=Math.abs(a.pageX-b.pageX),e=Math.abs(a.pageY-b.pageY);return c>=e?a.pageX-b.pageX>0?d.DIRECTION_LEFT:d.DIRECTION_RIGHT:a.pageY-b.pageY>0?d.DIRECTION_UP:d.DIRECTION_DOWN},getDistance:function(a,b){var c=b.pageX-a.pageX,d=b.pageY-a.pageY;return Math.sqrt(c*c+d*d)},getScale:function(a,b){return a.length>=2&&b.length>=2?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return a.length>=2&&b.length>=2?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==d.DIRECTION_UP||a==d.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(a,b){b&&a&&a.style&&(d.utils.each(["webkit","khtml","moz","Moz","ms","o",""],function(c){d.utils.each(b,function(b){c&&(b=c+b.substring(0,1).toUpperCase()+b.substring(1)),b in a.style&&(a.style[b]=b)})}),"none"==b.userSelect&&(a.onselectstart=function(){return!1}),"none"==b.userDrag&&(a.ondragstart=function(){return!1}))}},d.Instance=function(a,b){var e=this;return c(),this.element=a,this.enabled=!0,this.options=d.utils.extend(d.utils.extend({},d.defaults),b||{}),this.options.stop_browser_behavior&&d.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),d.event.onTouch(a,d.EVENT_START,function(a){e.enabled&&d.detection.startDetect(e,a)}),this},d.Instance.prototype={on:function(a,b){var c=a.split(" ");return d.utils.each(c,function(a){this.element.addEventListener(a,b,!1)},this),this},off:function(a,b){var c=a.split(" ");return d.utils.each(c,function(a){this.element.removeEventListener(a,b,!1)},this),this},trigger:function(a,b){b||(b={});var c=d.DOCUMENT.createEvent("Event");c.initEvent(a,!0,!0),c.gesture=b;var e=this.element;return d.utils.hasParent(b.target,e)&&(e=b.target),e.dispatchEvent(c),this},enable:function(a){return this.enabled=a,this}};var e=null,f=!1,g=!1;d.event={bindDom:function(a,b,c){var e=b.split(" ");d.utils.each(e,function(b){a.addEventListener(b,c,!1)})},onTouch:function(a,b,c){var h=this;this.bindDom(a,d.EVENT_TYPES[b],function(i){var j=i.type.toLowerCase();if(!j.match(/mouse/)||!g){j.match(/touch/)||j.match(/pointerdown/)||j.match(/mouse/)&&1===i.which?f=!0:j.match(/mouse/)&&!i.which&&(f=!1),j.match(/touch|pointer/)&&(g=!0);var k=0;f&&(d.HAS_POINTEREVENTS&&b!=d.EVENT_END?k=d.PointerEvent.updatePointer(b,i):j.match(/touch/)?k=i.touches.length:g||(k=j.match(/up/)?0:1),k>0&&b==d.EVENT_END?b=d.EVENT_MOVE:k||(b=d.EVENT_END),(k||null===e)&&(e=i),c.call(d.detection,h.collectEventData(a,b,h.getTouchList(e,b),i)),d.HAS_POINTEREVENTS&&b==d.EVENT_END&&(k=d.PointerEvent.updatePointer(b,i))),k||(e=null,f=!1,g=!1,d.PointerEvent.reset())}})},determineEventTypes:function(){var a;a=d.HAS_POINTEREVENTS?d.PointerEvent.getEvents():d.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],d.EVENT_TYPES[d.EVENT_START]=a[0],d.EVENT_TYPES[d.EVENT_MOVE]=a[1],d.EVENT_TYPES[d.EVENT_END]=a[2]},getTouchList:function(a){return d.HAS_POINTEREVENTS?d.PointerEvent.getTouchList():a.touches?a.touches:(a.identifier=1,[a])},collectEventData:function(a,b,c,e){var f=d.POINTER_TOUCH;return(e.type.match(/mouse/)||d.PointerEvent.matchType(d.POINTER_MOUSE,e))&&(f=d.POINTER_MOUSE),{center:d.utils.getCenter(c),timeStamp:(new Date).getTime(),target:e.target,touches:c,eventType:b,pointerType:f,srcEvent:e,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return d.detection.stopDetect()}}}},d.PointerEvent={pointers:{},getTouchList:function(){var a=this,b=[];return d.utils.each(a.pointers,function(a){b.push(a)}),b},updatePointer:function(a,b){return a==d.EVENT_END?this.pointers={}:(b.identifier=b.pointerId,this.pointers[b.pointerId]=b),Object.keys(this.pointers).length},matchType:function(a,b){if(!b.pointerType)return!1;var c=b.pointerType,e={};return e[d.POINTER_MOUSE]=c===b.MSPOINTER_TYPE_MOUSE||c===d.POINTER_MOUSE,e[d.POINTER_TOUCH]=c===b.MSPOINTER_TYPE_TOUCH||c===d.POINTER_TOUCH,e[d.POINTER_PEN]=c===b.MSPOINTER_TYPE_PEN||c===d.POINTER_PEN,e[a]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},d.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,b){this.current||(this.stopped=!1,this.current={inst:a,startEvent:d.utils.extend({},b),lastEvent:!1,name:""},this.detect(b))},detect:function(a){if(this.current&&!this.stopped){a=this.extendEventData(a);var b=this.current.inst.options;return d.utils.each(this.gestures,function(c){return this.stopped||b[c.name]===!1||c.handler.call(c,a,this.current.inst)!==!1?void 0:(this.stopDetect(),!1)},this),this.current&&(this.current.lastEvent=a),a.eventType==d.EVENT_END&&!a.touches.length-1&&this.stopDetect(),a}},stopDetect:function(){this.previous=d.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(a){var b=this.current.startEvent;!b||a.touches.length==b.touches.length&&a.touches!==b.touches||(b.touches=[],d.utils.each(a.touches,function(a){b.touches.push(d.utils.extend({},a))}));var c,e,f=a.timeStamp-b.timeStamp,g=a.center.pageX-b.center.pageX,h=a.center.pageY-b.center.pageY,i=d.utils.getVelocity(f,g,h);return"end"===a.eventType?(c=this.current.lastEvent&&this.current.lastEvent.interimAngle,e=this.current.lastEvent&&this.current.lastEvent.interimDirection):(c=this.current.lastEvent&&d.utils.getAngle(this.current.lastEvent.center,a.center),e=this.current.lastEvent&&d.utils.getDirection(this.current.lastEvent.center,a.center)),d.utils.extend(a,{deltaTime:f,deltaX:g,deltaY:h,velocityX:i.x,velocityY:i.y,distance:d.utils.getDistance(b.center,a.center),angle:d.utils.getAngle(b.center,a.center),interimAngle:c,direction:d.utils.getDirection(b.center,a.center),interimDirection:e,scale:d.utils.getScale(b.touches,a.touches),rotation:d.utils.getRotation(b.touches,a.touches),startEvent:b}),a},register:function(a){var c=a.defaults||{};return c[a.name]===b&&(c[a.name]=!0),d.utils.extend(d.defaults,c,!0),a.index=a.index||1e3,this.gestures.push(a),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}},d.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(a,b){if(d.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),void(this.triggered=!1);if(!(b.options.drag_max_touches>0&&a.touches.length>b.options.drag_max_touches))switch(a.eventType){case d.EVENT_START:this.triggered=!1;break;case d.EVENT_MOVE:if(a.distance<b.options.drag_min_distance&&d.detection.current.name!=this.name)return;if(d.detection.current.name!=this.name&&(d.detection.current.name=this.name,b.options.correct_for_drag_min_distance&&a.distance>0)){var c=Math.abs(b.options.drag_min_distance/a.distance);d.detection.current.startEvent.center.pageX+=a.deltaX*c,d.detection.current.startEvent.center.pageY+=a.deltaY*c,a=d.detection.extendEventData(a)
}(d.detection.current.lastEvent.drag_locked_to_axis||b.options.drag_lock_to_axis&&b.options.drag_lock_min_distance<=a.distance)&&(a.drag_locked_to_axis=!0);var e=d.detection.current.lastEvent.direction;a.drag_locked_to_axis&&e!==a.direction&&(a.direction=d.utils.isVertical(e)?a.deltaY<0?d.DIRECTION_UP:d.DIRECTION_DOWN:a.deltaX<0?d.DIRECTION_LEFT:d.DIRECTION_RIGHT),this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),b.trigger(this.name+a.direction,a),(b.options.drag_block_vertical&&d.utils.isVertical(a.direction)||b.options.drag_block_horizontal&&!d.utils.isVertical(a.direction))&&a.preventDefault();break;case d.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},d.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(a,b){switch(a.eventType){case d.EVENT_START:clearTimeout(this.timer),d.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==d.detection.current.name&&b.trigger("hold",a)},b.options.hold_timeout);break;case d.EVENT_MOVE:a.distance>b.options.hold_threshold&&clearTimeout(this.timer);break;case d.EVENT_END:clearTimeout(this.timer)}}},d.gestures.Release={name:"release",index:1/0,handler:function(a,b){a.eventType==d.EVENT_END&&b.trigger(this.name,a)}},d.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_min_touches:1,swipe_max_touches:1,swipe_velocity:.7},handler:function(a,b){if(a.eventType==d.EVENT_END){if(b.options.swipe_max_touches>0&&a.touches.length<b.options.swipe_min_touches&&a.touches.length>b.options.swipe_max_touches)return;(a.velocityX>b.options.swipe_velocity||a.velocityY>b.options.swipe_velocity)&&(b.trigger(this.name,a),b.trigger(this.name+a.direction,a))}}},d.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(a,b){if(a.eventType==d.EVENT_END&&"touchcancel"!=a.srcEvent.type){var c=d.detection.previous,e=!1;if(a.deltaTime>b.options.tap_max_touchtime||a.distance>b.options.tap_max_distance)return;c&&"tap"==c.name&&a.timeStamp-c.lastEvent.timeStamp<b.options.doubletap_interval&&a.distance<b.options.doubletap_distance&&(b.trigger("doubletap",a),e=!0),(!e||b.options.tap_always)&&(d.detection.current.name="tap",b.trigger(d.detection.current.name,a))}}},d.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(a,b){return b.options.prevent_mouseevents&&a.pointerType==d.POINTER_MOUSE?void a.stopDetect():(b.options.prevent_default&&a.preventDefault(),void(a.eventType==d.EVENT_START&&b.trigger(this.name,a)))}},d.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(a,b){if(d.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),void(this.triggered=!1);if(!(a.touches.length<2))switch(b.options.transform_always_block&&a.preventDefault(),a.eventType){case d.EVENT_START:this.triggered=!1;break;case d.EVENT_MOVE:var c=Math.abs(1-a.scale),e=Math.abs(a.rotation);if(c<b.options.transform_min_scale&&e<b.options.transform_min_rotation)return;d.detection.current.name=this.name,this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),e>b.options.transform_min_rotation&&b.trigger("rotate",a),c>b.options.transform_min_scale&&(b.trigger("pinch",a),b.trigger("pinch"+(a.scale<1?"in":"out"),a));break;case d.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return d}):"object"==typeof module&&"object"==typeof module.exports?module.exports=d:a.Hammer=d}(this),function(){function a(a,b,c){c=(c||0)-1;for(var d=a?a.length:0;++c<d;)if(a[c]===b)return c;return-1}function b(b,c){var d=typeof c;if(b=b.l,"boolean"==d||null==c)return b[c]?0:-1;"number"!=d&&"string"!=d&&(d="object");var e="number"==d?c:r+c;return b=(b=b[d])&&b[e],"object"==d?b&&-1<a(b,c)?0:-1:b?0:-1}function c(a){var b=this.l,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:r+a,b=b[c]||(b[c]={});"object"==c?(b[d]||(b[d]=[])).push(a):b[d]=!0}}function d(a){return a.charCodeAt(0)}function e(a,b){for(var c=a.m,d=b.m,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.n-b.n}function f(a){var b=-1,d=a.length,e=a[0],f=a[d/2|0],g=a[d-1];if(e&&"object"==typeof e&&f&&"object"==typeof f&&g&&"object"==typeof g)return!1;for(e=i(),e["false"]=e["null"]=e["true"]=e.undefined=!1,f=i(),f.k=a,f.l=e,f.push=c;++b<d;)f.push(a[b]);return f}function g(a){return"\\"+U[a]}function h(){return o.pop()||[]}function i(){return p.pop()||{k:null,l:null,m:null,"false":!1,n:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,o:null}}function j(a){a.length=0,o.length<t&&o.push(a)}function k(a){var b=a.l;b&&k(b),a.k=a.l=a.m=a.object=a.number=a.string=a.o=null,p.length<t&&p.push(a)}function l(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);var d=-1;c=c-b||0;for(var e=Array(0>c?0:c);++d<c;)e[d]=a[b+d];return e}function m(c){function o(a,b,c){if(!a||!T[typeof a])return a;b=b&&"undefined"==typeof c?b:bb(b,c,3);for(var d=-1,e=T[typeof a]&&Kc(a),f=e?e.length:0;++d<f&&(c=e[d],!1!==b(a[c],c,a)););return a}function p(a,b,c){var d;if(!a||!T[typeof a])return a;b=b&&"undefined"==typeof c?b:bb(b,c,3);for(d in a)if(!1===b(a[d],d,a))break;return a}function t(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i="number"==typeof c?2:g.length;++h<i;)if((e=g[h])&&T[typeof e])for(var j=-1,k=T[typeof e]&&Kc(e),l=k?k.length:0;++j<l;)d=k[j],"undefined"==typeof f[d]&&(f[d]=e[d]);return f}function U(a,b,c){var d,e=a,f=e;if(!e)return f;var g=arguments,h=0,i="number"==typeof c?2:g.length;if(i>3&&"function"==typeof g[i-2])var j=bb(g[--i-1],g[i--],2);else i>2&&"function"==typeof g[i-1]&&(j=g[--i]);for(;++h<i;)if((e=g[h])&&T[typeof e])for(var k=-1,l=T[typeof e]&&Kc(e),m=l?l.length:0;++k<m;)d=l[k],f[d]=j?j(f[d],e[d]):e[d];return f}function W(a){var b,c=[];if(!a||!T[typeof a])return c;for(b in a)rc.call(a,b)&&c.push(b);return c}function X(a){return a&&"object"==typeof a&&!Jc(a)&&rc.call(a,"__wrapped__")?a:new Y(a)}function Y(a,b){this.__chain__=!!b,this.__wrapped__=a}function Z(a){function b(){if(d){var a=l(d);sc.apply(a,arguments)}if(this instanceof b){var f=ab(c.prototype),a=c.apply(f,a||arguments);return vb(a)?a:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return Ic(b,a),b}function _(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f}if(!vb(a))return a;var g=kc.call(a);if(!Q[g])return a;var i=Gc[g];switch(g){case J:case K:return new i(+a);case M:case P:return new i(a);case O:return f=i(a.source,z.exec(a)),f.lastIndex=a.lastIndex,f}if(g=Jc(a),b){var k=!d;d||(d=h()),e||(e=h());for(var m=d.length;m--;)if(d[m]==a)return e[m];f=g?i(a.length):{}}else f=g?l(a):U({},a);return g&&(rc.call(a,"index")&&(f.index=a.index),rc.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(g?Db:o)(a,function(a,g){f[g]=_(a,b,c,d,e)}),k&&(j(d),j(e)),f):f}function ab(a){return vb(a)?xc(a):{}}function bb(a,b,c){if("function"!=typeof a)return Ub;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(Hc.funcNames&&(d=!a.name),d=d||!Hc.funcDecomp,!d)){var e=pc.call(a);Hc.funcNames||(d=!A.test(e)),d||(d=E.test(e),Ic(a,d))}if(!1===d||!0!==d&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Sb(a,b)}function cb(a){function b(){var a=i?g:this;if(e){var o=l(e);sc.apply(o,arguments)}return(f||k)&&(o||(o=l(arguments)),f&&sc.apply(o,f),k&&o.length<h)?(d|=16,cb([c,m?d:-4&d,o,null,g,h])):(o||(o=arguments),j&&(c=a[n]),this instanceof b?(a=ab(c.prototype),o=c.apply(a,o),vb(o)?o:a):c.apply(a,o))}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=1&d,j=2&d,k=4&d,m=8&d,n=c;return Ic(b,a),b}function db(c,d){var e=-1,g=mb(),h=c?c.length:0,i=h>=s&&g===a,j=[];if(i){var l=f(d);l?(g=b,d=l):i=!1}for(;++e<h;)l=c[e],0>g(d,l)&&j.push(l);return i&&k(d),j}function eb(a,b,c,d){d=(d||0)-1;for(var e=a?a.length:0,f=[];++d<e;){var g=a[d];if(g&&"object"==typeof g&&"number"==typeof g.length&&(Jc(g)||qb(g))){b||(g=eb(g,b,c));var h=-1,i=g.length,j=f.length;for(f.length+=i;++h<i;)f[j++]=g[h]}else c||f.push(g)}return f}function fb(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;if(a===a&&!(a&&T[typeof a]||b&&T[typeof b]))return!1;if(null==a||null==b)return a===b;var i=kc.call(a),k=kc.call(b);if(i==H&&(i=N),k==H&&(k=N),i!=k)return!1;switch(i){case J:case K:return+a==+b;case M:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case O:case P:return a==fc(b)}if(k=i==I,!k){var l=rc.call(a,"__wrapped__"),m=rc.call(b,"__wrapped__");if(l||m)return fb(l?a.__wrapped__:a,m?b.__wrapped__:b,c,d,e,f);if(i!=N)return!1;if(i=a.constructor,l=b.constructor,i!=l&&!(ub(i)&&i instanceof i&&ub(l)&&l instanceof l)&&"constructor"in a&&"constructor"in b)return!1}for(i=!e,e||(e=h()),f||(f=h()),l=e.length;l--;)if(e[l]==a)return f[l]==b;var n=0,g=!0;if(e.push(a),f.push(b),k){if(l=a.length,n=b.length,(g=n==l)||d)for(;n--;)if(k=l,m=b[n],d)for(;k--&&!(g=fb(a[k],m,c,d,e,f)););else if(!(g=fb(a[n],m,c,d,e,f)))break}else p(b,function(b,h,i){return rc.call(i,h)?(n++,g=rc.call(a,h)&&fb(a[h],b,c,d,e,f)):void 0}),g&&!d&&p(a,function(a,b,c){return rc.call(c,b)?g=-1<--n:void 0});return e.pop(),f.pop(),i&&(j(e),j(f)),g}function gb(a,b,c,d,e){(Jc(b)?Db:o)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=Jc(b))||Pc(b))){for(i=d.length;i--;)if(g=d[i]==b){j=e[i];break}if(!g){var k;c&&(i=c(j,b),k="undefined"!=typeof i)&&(j=i),k||(j=h?Jc(j)?j:[]:Pc(j)?j:{}),d.push(b),e.push(j),k||gb(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function hb(a,b){return a+oc(Fc()*(b-a+1))}function ib(c,d,e){var g=-1,i=mb(),l=c?c.length:0,m=[],n=!d&&l>=s&&i===a,o=e||n?h():m;for(n&&(o=f(o),i=b);++g<l;){var p=c[g],q=e?e(p,g,c):p;(d?!g||o[o.length-1]!==q:0>i(o,q))&&((e||n)&&o.push(q),m.push(p))}return n?(j(o.k),k(o)):e&&j(o),m}function jb(a){return function(b,c,d){var e={};c=X.createCallback(c,d,3),d=-1;var f=b?b.length:0;if("number"==typeof f)for(;++d<f;){var g=b[d];a(e,g,c(g,d,b),b)}else o(b,function(b,d,f){a(e,b,c(b,d,f),f)});return e}}function kb(a,b,c,d,e,f){var g=1&b,h=4&b,i=16&b,j=32&b;if(!(2&b||ub(a)))throw new gc;i&&!c.length&&(b&=-17,i=c=!1),j&&!d.length&&(b&=-33,j=d=!1);var k=a&&a.__bindData__;return k&&!0!==k?(k=l(k),k[2]&&(k[2]=l(k[2])),k[3]&&(k[3]=l(k[3])),!g||1&k[1]||(k[4]=e),!g&&1&k[1]&&(b|=8),!h||4&k[1]||(k[5]=f),i&&sc.apply(k[2]||(k[2]=[]),c),j&&vc.apply(k[3]||(k[3]=[]),d),k[1]|=b,kb.apply(null,k)):(1==b||17===b?Z:cb)([a,b,c,d,e,f])}function lb(a){return Lc[a]}function mb(){var b=(b=X.indexOf)===Mb?a:b;return b}function nb(a){return"function"==typeof a&&lc.test(a)}function ob(a){var b,c;return a&&kc.call(a)==N&&(b=a.constructor,!ub(b)||b instanceof b)?(p(a,function(a,b){c=b}),"undefined"==typeof c||rc.call(a,c)):!1}function pb(a){return Mc[a]}function qb(a){return a&&"object"==typeof a&&"number"==typeof a.length&&kc.call(a)==H||!1}function rb(a,b,c){var d=Kc(a),e=d.length;for(b=bb(b,c,3);e--&&(c=d[e],!1!==b(a[c],c,a)););return a}function sb(a){var b=[];return p(a,function(a,c){ub(a)&&b.push(c)}),b.sort()}function tb(a){for(var b=-1,c=Kc(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function ub(a){return"function"==typeof a}function vb(a){return!(!a||!T[typeof a])}function wb(a){return"number"==typeof a||a&&"object"==typeof a&&kc.call(a)==M||!1}function xb(a){return"string"==typeof a||a&&"object"==typeof a&&kc.call(a)==P||!1}function yb(a){for(var b=-1,c=Kc(a),d=c.length,e=Zb(d);++b<d;)e[b]=a[c[b]];return e}function zb(a,b,c){var d=-1,e=mb(),f=a?a.length:0,g=!1;return c=(0>c?Cc(0,f+c):c)||0,Jc(a)?g=-1<e(a,b,c):"number"==typeof f?g=-1<(xb(a)?a.indexOf(b,c):e(a,b,c)):o(a,function(a){return++d<c?void 0:!(g=a===b)}),g}function Ab(a,b,c){var d=!0;b=X.createCallback(b,c,3),c=-1;var e=a?a.length:0;if("number"==typeof e)for(;++c<e&&(d=!!b(a[c],c,a)););else o(a,function(a,c,e){return d=!!b(a,c,e)});return d}function Bb(a,b,c){var d=[];b=X.createCallback(b,c,3),c=-1;var e=a?a.length:0;if("number"==typeof e)for(;++c<e;){var f=a[c];b(f,c,a)&&d.push(f)}else o(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function Cb(a,b,c){b=X.createCallback(b,c,3),c=-1;var d=a?a.length:0;if("number"!=typeof d){var e;return o(a,function(a,c,d){return b(a,c,d)?(e=a,!1):void 0}),e}for(;++c<d;){var f=a[c];if(b(f,c,a))return f}}function Db(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:bb(b,c,3),"number"==typeof e)for(;++d<e&&!1!==b(a[d],d,a););else o(a,b);return a}function Eb(a,b,c){var d=a?a.length:0;if(b=b&&"undefined"==typeof c?b:bb(b,c,3),"number"==typeof d)for(;d--&&!1!==b(a[d],d,a););else{var e=Kc(a),d=e.length;o(a,function(a,c,f){return c=e?e[--d]:--d,b(f[c],c,f)})}return a}function Fb(a,b,c){var d=-1,e=a?a.length:0;if(b=X.createCallback(b,c,3),"number"==typeof e)for(var f=Zb(e);++d<e;)f[d]=b(a[d],d,a);else f=[],o(a,function(a,c,e){f[++d]=b(a,c,e)});return f}function Gb(a,b,c){var e=-1/0,f=e;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Jc(a)){c=-1;for(var g=a.length;++c<g;){var h=a[c];h>f&&(f=h)}}else b=null==b&&xb(a)?d:X.createCallback(b,c,3),Db(a,function(a,c,d){c=b(a,c,d),c>e&&(e=c,f=a)});return f}function Hb(a,b,c,d){if(!a)return c;var e=3>arguments.length;b=X.createCallback(b,d,4);var f=-1,g=a.length;if("number"==typeof g)for(e&&(c=a[++f]);++f<g;)c=b(c,a[f],f,a);else o(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function Ib(a,b,c,d){var e=3>arguments.length;return b=X.createCallback(b,d,4),Eb(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)}),c}function Jb(a){var b=-1,c=a?a.length:0,d=Zb("number"==typeof c?c:0);return Db(a,function(a){var c=hb(0,++b);d[b]=d[c],d[c]=a}),d}function Kb(a,b,c){var d;b=X.createCallback(b,c,3),c=-1;var e=a?a.length:0;if("number"==typeof e)for(;++c<e&&!(d=b(a[c],c,a)););else o(a,function(a,c,e){return!(d=b(a,c,e))});return!!d}function Lb(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=-1;for(b=X.createCallback(b,c,3);++f<e&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[0]:n;return l(a,0,Dc(Cc(0,d),e))}function Mb(b,c,d){if("number"==typeof d){var e=b?b.length:0;d=0>d?Cc(0,e+d):d||0}else if(d)return d=Ob(b,c),b[d]===c?d:-1;return a(b,c,d)}function Nb(a,b,c){if("number"!=typeof b&&null!=b){var d=0,e=-1,f=a?a.length:0;for(b=X.createCallback(b,c,3);++e<f&&b(a[e],e,a);)d++}else d=null==b||c?1:Cc(0,b);return l(a,d)}function Ob(a,b,c,d){var e=0,f=a?a.length:e;for(c=c?X.createCallback(c,d,1):Ub,b=c(b);f>e;)d=e+f>>>1,c(a[d])<b?e=d+1:f=d;return e}function Pb(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(c=X.createCallback(c,d,3)),ib(a,b,c)}function Qb(){for(var a=1<arguments.length?arguments:arguments[0],b=-1,c=a?Gb(Tc(a,"length")):0,d=Zb(0>c?0:c);++b<c;)d[b]=Tc(a,b);return d}function Rb(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||Jc(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Sb(a,b){return 2<arguments.length?kb(a,17,l(arguments,2),null,b):kb(a,1,null,null,b)}function Tb(a,b,c){function d(){k&&nc(k),g=k=l=n,(p||o!==b)&&(m=Uc(),h=a.apply(j,f),k||g||(f=j=null))}function e(){var c=b-(Uc()-i);c>0?k=tc(e,c):(g&&nc(g),c=l,g=k=l=n,c&&(m=Uc(),h=a.apply(j,f),k||g||(f=j=null)))}var f,g,h,i,j,k,l,m=0,o=!1,p=!0;if(!ub(a))throw new gc;if(b=Cc(0,b)||0,!0===c)var q=!0,p=!1;else vb(c)&&(q=c.leading,o="maxWait"in c&&(Cc(b,c.maxWait)||0),p="trailing"in c?c.trailing:p);return function(){if(f=arguments,i=Uc(),j=this,l=p&&(k||!q),!1===o)var c=q&&!k;else{g||q||(m=i);var n=o-(i-m),r=0>=n;r?(g&&(g=nc(g)),m=i,h=a.apply(j,f)):g||(g=tc(d,n))}return r&&k?k=nc(k):k||b===o||(k=tc(e,b)),c&&(r=!0,h=a.apply(j,f)),!r||k||g||(f=j=null),h}}function Ub(a){return a}function Vb(a,b,c){var d=!0,e=b&&sb(b);b&&(c||e.length)||(null==c&&(c=b),f=Y,b=a,a=X,e=sb(b)),!1===c?d=!1:vb(c)&&"chain"in c&&(d=c.chain);var f=a,g=ub(f);Db(e,function(c){var e=a[c]=b[c];g&&(f.prototype[c]=function(){var b=this.__chain__,c=this.__wrapped__,g=[c];if(sc.apply(g,arguments),g=e.apply(a,g),d||b){if(c===g&&vb(g))return this;g=new f(g),g.__chain__=b}return g})})}function Wb(){}function Xb(a){return function(b){return b[a]}}function Yb(){return this.__wrapped__}c=c?$.defaults(V.Object(),c,$.pick(V,G)):V;var Zb=c.Array,$b=c.Boolean,_b=c.Date,ac=c.Function,bc=c.Math,cc=c.Number,dc=c.Object,ec=c.RegExp,fc=c.String,gc=c.TypeError,hc=[],ic=dc.prototype,jc=c._,kc=ic.toString,lc=ec("^"+fc(kc).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),mc=bc.ceil,nc=c.clearTimeout,oc=bc.floor,pc=ac.prototype.toString,qc=nb(qc=dc.getPrototypeOf)&&qc,rc=ic.hasOwnProperty,sc=hc.push,tc=c.setTimeout,uc=hc.splice,vc=hc.unshift,wc=function(){try{var a={},b=nb(b=dc.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),xc=nb(xc=dc.create)&&xc,yc=nb(yc=Zb.isArray)&&yc,zc=c.isFinite,Ac=c.isNaN,Bc=nb(Bc=dc.keys)&&Bc,Cc=bc.max,Dc=bc.min,Ec=c.parseInt,Fc=bc.random,Gc={};Gc[I]=Zb,Gc[J]=$b,Gc[K]=_b,Gc[L]=ac,Gc[N]=dc,Gc[M]=cc,Gc[O]=ec,Gc[P]=fc,Y.prototype=X.prototype;var Hc=X.support={};Hc.funcDecomp=!nb(c.a)&&E.test(m),Hc.funcNames="string"==typeof ac.name,X.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:B,variable:"",imports:{_:X}},xc||(ab=function(){function a(){}return function(b){if(vb(b)){a.prototype=b;var d=new a;a.prototype=null}return d||c.Object()}}());var Ic=wc?function(a,b){S.value=b,wc(a,"__bindData__",S)}:Wb,Jc=yc||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&kc.call(a)==I||!1},Kc=Bc?function(a){return vb(a)?Bc(a):[]}:W,Lc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Mc=tb(Lc),Nc=ec("("+Kc(Mc).join("|")+")","g"),Oc=ec("["+Kc(Lc).join("")+"]","g"),Pc=qc?function(a){if(!a||kc.call(a)!=N)return!1;var b=a.valueOf,c=nb(b)&&(c=qc(b))&&qc(c);return c?a==c||qc(a)==c:ob(a)}:ob,Qc=jb(function(a,b,c){rc.call(a,c)?a[c]++:a[c]=1}),Rc=jb(function(a,b,c){(rc.call(a,c)?a[c]:a[c]=[]).push(b)}),Sc=jb(function(a,b,c){a[c]=b}),Tc=Fb,Uc=nb(Uc=_b.now)&&Uc||function(){return(new _b).getTime()},Vc=8==Ec(u+"08")?Ec:function(a,b){return Ec(xb(a)?a.replace(C,""):a,b||0)};return X.after=function(a,b){if(!ub(b))throw new gc;return function(){return 1>--a?b.apply(this,arguments):void 0}},X.assign=U,X.at=function(a){for(var b=arguments,c=-1,d=eb(b,!0,!1,1),b=b[2]&&b[2][b[1]]===a?1:d.length,e=Zb(b);++c<b;)e[c]=a[d[c]];return e},X.bind=Sb,X.bindAll=function(a){for(var b=1<arguments.length?eb(arguments,!0,!1,1):sb(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=kb(a[e],1,null,null,a)}return a},X.bindKey=function(a,b){return 2<arguments.length?kb(b,19,l(arguments,2),null,a):kb(b,3,null,null,a)},X.chain=function(a){return a=new Y(a),a.__chain__=!0,a},X.compact=function(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d},X.compose=function(){for(var a=arguments,b=a.length;b--;)if(!ub(a[b]))throw new gc;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}},X.constant=function(a){return function(){return a}},X.countBy=Qc,X.create=function(a,b){var c=ab(a);return b?U(c,b):c},X.createCallback=function(a,b,c){var d=typeof a;if(null==a||"function"==d)return bb(a,b,c);if("object"!=d)return Xb(a);var e=Kc(a),f=e[0],g=a[f];return 1!=e.length||g!==g||vb(g)?function(b){for(var c=e.length,d=!1;c--&&(d=fb(b[e[c]],a[e[c]],null,!0)););return d}:function(a){return a=a[f],g===a&&(0!==g||1/g==1/a)}},X.curry=function(a,b){return b="number"==typeof b?b:+b||a.length,kb(a,4,null,null,null,b)},X.debounce=Tb,X.defaults=t,X.defer=function(a){if(!ub(a))throw new gc;var b=l(arguments,1);return tc(function(){a.apply(n,b)},1)},X.delay=function(a,b){if(!ub(a))throw new gc;var c=l(arguments,2);return tc(function(){a.apply(n,c)},b)},X.difference=function(a){return db(a,eb(arguments,!0,!0,1))},X.filter=Bb,X.flatten=function(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=Fb(a,c,d)),eb(a,b)},X.forEach=Db,X.forEachRight=Eb,X.forIn=p,X.forInRight=function(a,b,c){var d=[];p(a,function(a,b){d.push(b,a)});var e=d.length;for(b=bb(b,c,3);e--&&!1!==b(d[e--],d[e],a););return a},X.forOwn=o,X.forOwnRight=rb,X.functions=sb,X.groupBy=Rc,X.indexBy=Sc,X.initial=function(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=X.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else d=null==b||c?1:b||d;return l(a,0,Dc(Cc(0,e-d),e))},X.intersection=function(){for(var c=[],d=-1,e=arguments.length,g=h(),i=mb(),l=i===a,m=h();++d<e;){var n=arguments[d];(Jc(n)||qb(n))&&(c.push(n),g.push(l&&n.length>=s&&f(d?c[d]:m)))}var l=c[0],o=-1,p=l?l.length:0,q=[];a:for(;++o<p;){var r=g[0],n=l[o];if(0>(r?b(r,n):i(m,n))){for(d=e,(r||m).push(n);--d;)if(r=g[d],0>(r?b(r,n):i(c[d],n)))continue a;q.push(n)}}for(;e--;)(r=g[e])&&k(r);return j(g),j(m),q},X.invert=tb,X.invoke=function(a,b){var c=l(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=Zb("number"==typeof f?f:0);return Db(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g},X.keys=Kc,X.map=Fb,X.mapValues=function(a,b,c){var d={};return b=X.createCallback(b,c,3),o(a,function(a,c,e){d[c]=b(a,c,e)}),d},X.max=Gb,X.memoize=function(a,b){function c(){var d=c.cache,e=b?b.apply(this,arguments):r+arguments[0];return rc.call(d,e)?d[e]:d[e]=a.apply(this,arguments)}if(!ub(a))throw new gc;return c.cache={},c},X.merge=function(a){var b=arguments,c=2;if(!vb(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=bb(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var b=l(arguments,1,c),e=-1,f=h(),g=h();++e<c;)gb(a,b[e],d,f,g);return j(f),j(g),a},X.min=function(a,b,c){var e=1/0,f=e;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Jc(a)){c=-1;for(var g=a.length;++c<g;){var h=a[c];f>h&&(f=h)}}else b=null==b&&xb(a)?d:X.createCallback(b,c,3),Db(a,function(a,c,d){c=b(a,c,d),e>c&&(e=c,f=a)});return f},X.omit=function(a,b,c){var d={};if("function"!=typeof b){var e=[];p(a,function(a,b){e.push(b)});for(var e=db(e,eb(arguments,!0,!1,1)),f=-1,g=e.length;++f<g;){var h=e[f];d[h]=a[h]}}else b=X.createCallback(b,c,3),p(a,function(a,c,e){b(a,c,e)||(d[c]=a)});return d},X.once=function(a){var b,c;if(!ub(a))throw new gc;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}},X.pairs=function(a){for(var b=-1,c=Kc(a),d=c.length,e=Zb(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e},X.partial=function(a){return kb(a,16,l(arguments,1))},X.partialRight=function(a){return kb(a,32,null,l(arguments,1))},X.pick=function(a,b,c){var d={};if("function"!=typeof b)for(var e=-1,f=eb(arguments,!0,!1,1),g=vb(a)?f.length:0;++e<g;){var h=f[e];h in a&&(d[h]=a[h])}else b=X.createCallback(b,c,3),p(a,function(a,c,e){b(a,c,e)&&(d[c]=a)});return d},X.pluck=Tc,X.property=Xb,X.pull=function(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(uc.call(a,f--,1),e--);return a},X.range=function(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);var d=-1;b=Cc(0,mc((b-a)/(c||1)));for(var e=Zb(b);++d<b;)e[d]=a,a+=c;return e},X.reject=function(a,b,c){return b=X.createCallback(b,c,3),Bb(a,function(a,c,d){return!b(a,c,d)})},X.remove=function(a,b,c){var d=-1,e=a?a.length:0,f=[];for(b=X.createCallback(b,c,3);++d<e;)c=a[d],b(c,d,a)&&(f.push(c),uc.call(a,d--,1),e--);return f},X.rest=Nb,X.shuffle=Jb,X.sortBy=function(a,b,c){var d=-1,f=Jc(b),g=a?a.length:0,l=Zb("number"==typeof g?g:0);for(f||(b=X.createCallback(b,c,3)),Db(a,function(a,c,e){var g=l[++d]=i();f?g.m=Fb(b,function(b){return a[b]}):(g.m=h())[0]=b(a,c,e),g.n=d,g.o=a}),g=l.length,l.sort(e);g--;)a=l[g],l[g]=a.o,f||j(a.m),k(a);return l},X.tap=function(a,b){return b(a),a},X.throttle=function(a,b,c){var d=!0,e=!0;if(!ub(a))throw new gc;return!1===c?d=!1:vb(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),R.leading=d,R.maxWait=b,R.trailing=e,Tb(a,b,R)},X.times=function(a,b,c){a=-1<(a=+a)?a:0;var d=-1,e=Zb(a);for(b=bb(b,c,1);++d<a;)e[d]=b(d);return e},X.toArray=function(a){return a&&"number"==typeof a.length?l(a):yb(a)},X.transform=function(a,b,c,d){var e=Jc(a);if(null==c)if(e)c=[];else{var f=a&&a.constructor;c=ab(f&&f.prototype)}return b&&(b=X.createCallback(b,d,4),(e?Db:o)(a,function(a,d,e){return b(c,a,d,e)})),c},X.union=function(){return ib(eb(arguments,!0,!0))},X.uniq=Pb,X.values=yb,X.where=Bb,X.without=function(a){return db(a,l(arguments,1))},X.wrap=function(a,b){return kb(b,16,[a])},X.xor=function(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Jc(c)||qb(c))var d=d?ib(db(d,c).concat(db(c,d))):c}return d||[]},X.zip=Qb,X.zipObject=Rb,X.collect=Fb,X.drop=Nb,X.each=Db,X.eachRight=Eb,X.extend=U,X.methods=sb,X.object=Rb,X.select=Bb,X.tail=Nb,X.unique=Pb,X.unzip=Qb,Vb(X),X.clone=function(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),_(a,b,"function"==typeof c&&bb(c,d,1))},X.cloneDeep=function(a,b,c){return _(a,!0,"function"==typeof b&&bb(b,c,1))},X.contains=zb,X.escape=function(a){return null==a?"":fc(a).replace(Oc,lb)},X.every=Ab,X.find=Cb,X.findIndex=function(a,b,c){var d=-1,e=a?a.length:0;for(b=X.createCallback(b,c,3);++d<e;)if(b(a[d],d,a))return d;return-1},X.findKey=function(a,b,c){var d;return b=X.createCallback(b,c,3),o(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d},X.findLast=function(a,b,c){var d;return b=X.createCallback(b,c,3),Eb(a,function(a,c,e){return b(a,c,e)?(d=a,!1):void 0}),d},X.findLastIndex=function(a,b,c){var d=a?a.length:0;for(b=X.createCallback(b,c,3);d--;)if(b(a[d],d,a))return d;return-1},X.findLastKey=function(a,b,c){var d;return b=X.createCallback(b,c,3),rb(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d},X.has=function(a,b){return a?rc.call(a,b):!1},X.identity=Ub,X.indexOf=Mb,X.isArguments=qb,X.isArray=Jc,X.isBoolean=function(a){return!0===a||!1===a||a&&"object"==typeof a&&kc.call(a)==J||!1},X.isDate=function(a){return a&&"object"==typeof a&&kc.call(a)==K||!1},X.isElement=function(a){return a&&1===a.nodeType||!1},X.isEmpty=function(a){var b=!0;if(!a)return b;var c=kc.call(a),d=a.length;return c==I||c==P||c==H||c==N&&"number"==typeof d&&ub(a.splice)?!d:(o(a,function(){return b=!1}),b)},X.isEqual=function(a,b,c,d){return fb(a,b,"function"==typeof c&&bb(c,d,2))},X.isFinite=function(a){return zc(a)&&!Ac(parseFloat(a))},X.isFunction=ub,X.isNaN=function(a){return wb(a)&&a!=+a},X.isNull=function(a){return null===a},X.isNumber=wb,X.isObject=vb,X.isPlainObject=Pc,X.isRegExp=function(a){return a&&"object"==typeof a&&kc.call(a)==O||!1},X.isString=xb,X.isUndefined=function(a){return"undefined"==typeof a},X.lastIndexOf=function(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?Cc(0,d+c):Dc(c,d-1))+1);d--;)if(a[d]===b)return d;return-1},X.mixin=Vb,X.noConflict=function(){return c._=jc,this},X.noop=Wb,X.now=Uc,X.parseInt=Vc,X.random=function(a,b,c){var d=null==a,e=null==b;return null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1?(c=Fc(),Dc(a+c*(b-a+parseFloat("1e-"+((c+"").length-1))),b)):hb(a,b)},X.reduce=Hb,X.reduceRight=Ib,X.result=function(a,b){if(a){var c=a[b];return ub(c)?a[b]():c}},X.runInContext=m,X.size=function(a){var b=a?a.length:0;return"number"==typeof b?b:Kc(a).length},X.some=Kb,X.sortedIndex=Ob,X.template=function(a,b,c){var d=X.templateSettings;a=fc(a||""),c=t({},c,d);var e,f=t({},c.imports,d.imports),d=Kc(f),f=yb(f),h=0,i=c.interpolate||D,j="__p+='",i=ec((c.escape||D).source+"|"+i.source+"|"+(i===B?y:D).source+"|"+(c.evaluate||D).source+"|$","g");a.replace(i,function(b,c,d,f,i,k){return d||(d=f),j+=a.slice(h,k).replace(F,g),c&&(j+="'+__e("+c+")+'"),i&&(e=!0,j+="';"+i+";\n__p+='"),d&&(j+="'+((__t=("+d+"))==null?'':__t)+'"),h=k+b.length,b}),j+="';",i=c=c.variable,i||(c="obj",j="with("+c+"){"+j+"}"),j=(e?j.replace(v,""):j).replace(w,"$1").replace(x,"$1;"),j="function("+c+"){"+(i?"":c+"||("+c+"={});")+"var __t,__p='',__e=_.escape"+(e?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+j+"return __p}";try{var k=ac(d,"return "+j).apply(n,f)}catch(l){throw l.source=j,l}return b?k(b):(k.source=j,k)},X.unescape=function(a){return null==a?"":fc(a).replace(Nc,pb)},X.uniqueId=function(a){var b=++q;return fc(null==a?"":a)+b},X.all=Ab,X.any=Kb,X.detect=Cb,X.findWhere=Cb,X.foldl=Hb,X.foldr=Ib,X.include=zb,X.inject=Hb,Vb(function(){var a={};return o(X,function(b,c){X.prototype[c]||(a[c]=b)}),a}(),!1),X.first=Lb,X.last=function(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=X.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[e-1]:n;return l(a,Cc(0,e-d))},X.sample=function(a,b,c){return a&&"number"!=typeof a.length&&(a=yb(a)),null==b||c?a?a[hb(0,a.length-1)]:n:(a=Jb(a),a.length=Dc(Cc(0,b),a.length),a)},X.take=Lb,X.head=Lb,o(X,function(a,b){var c="sample"!==b;X.prototype[b]||(X.prototype[b]=function(b,d){var e=this.__chain__,f=a(this.__wrapped__,b,d);return e||null!=b&&(!d||c&&"function"==typeof b)?new Y(f,e):f})}),X.VERSION="2.4.1",X.prototype.chain=function(){return this.__chain__=!0,this},X.prototype.toString=function(){return fc(this.__wrapped__)},X.prototype.value=Yb,X.prototype.valueOf=Yb,Db(["join","pop","shift"],function(a){var b=hc[a];X.prototype[a]=function(){var a=this.__chain__,c=b.apply(this.__wrapped__,arguments);return a?new Y(c,a):c}}),Db(["push","reverse","sort","unshift"],function(a){var b=hc[a];X.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),Db(["concat","slice","splice"],function(a){var b=hc[a];X.prototype[a]=function(){return new Y(b.apply(this.__wrapped__,arguments),this.__chain__)}}),X}var n,o=[],p=[],q=0,r=+new Date+"",s=75,t=40,u=" 	\f\n\r\u2028\u2029",v=/\b__p\+='';/g,w=/\b(__p\+=)''\+/g,x=/(__e\(.*?\)|\b__t\))\+'';/g,y=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,z=/\w*$/,A=/^\s*function[ \n\r\t]+\w/,B=/<%=([\s\S]+?)%>/g,C=RegExp("^["+u+"]*0+(?=.$)"),D=/($^)/,E=/\bthis\b/,F=/['\n\r\t\u2028\u2029\\]/g,G="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),H="[object Arguments]",I="[object Array]",J="[object Boolean]",K="[object Date]",L="[object Function]",M="[object Number]",N="[object Object]",O="[object RegExp]",P="[object String]",Q={};Q[L]=!1,Q[H]=Q[I]=Q[J]=Q[K]=Q[M]=Q[N]=Q[O]=Q[P]=!0;var R={leading:!1,maxWait:0,trailing:!1},S={configurable:!1,enumerable:!1,value:null,writable:!1},T={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},U={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},V=T[typeof window]&&window||this,W=T[typeof exports]&&exports&&!exports.nodeType&&exports,X=T[typeof module]&&module&&!module.nodeType&&module,Y=X&&X.exports===W&&W,Z=T[typeof global]&&global;!Z||Z.global!==Z&&Z.window!==Z||(V=Z);var $=m();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(V._=$,define(function(){return $})):W&&X?Y?(X.exports=$)._=$:W._=$:V._=$}.call(this),function(a,b,c){function d(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function e(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);return a.shiftKey||(b=b.toLowerCase()),b}return q[a.which]?q[a.which]:r[a.which]?r[a.which]:String.fromCharCode(a.which).toLowerCase()}function f(a){a=a||{};var b,c=!1;for(b in w)a[b]?c=!0:w[b]=0;c||(z=!1)}function g(a,b,c,d,e,f){var g,h,i=[],j=c.type;if(!u[a])return[];for("keyup"==j&&k(a)&&(b=[a]),g=0;g<u[a].length;++g)if(h=u[a][g],!(!d&&h.seq&&w[h.seq]!=h.level||j!=h.action||("keypress"!=j||c.metaKey||c.ctrlKey)&&b.sort().join(",")!==h.modifiers.sort().join(","))){var l=d&&h.seq==d&&h.level==f;
(!d&&h.combo==e||l)&&u[a].splice(g,1),i.push(h)}return i}function h(a){var b=[];return a.shiftKey&&b.push("shift"),a.altKey&&b.push("alt"),a.ctrlKey&&b.push("ctrl"),a.metaKey&&b.push("meta"),b}function i(a,b,c,d){A.stopCallback(b,b.target||b.srcElement,c,d)||!1!==a(b,c)||(b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation?b.stopPropagation():b.cancelBubble=!0)}function j(a){"number"!=typeof a.which&&(a.which=a.keyCode);var b=e(a);b&&("keyup"==a.type&&x===b?x=!1:A.handleKey(b,h(a),a))}function k(a){return"shift"==a||"ctrl"==a||"alt"==a||"meta"==a}function l(a,b,c,d){function g(b){return function(){z=b,++w[a],clearTimeout(p),p=setTimeout(f,1e3)}}function h(b){i(c,b,a),"keyup"!==d&&(x=e(b)),setTimeout(f,10)}for(var j=w[a]=0;j<b.length;++j){var k=j+1===b.length?h:g(d||m(b[j+1]).action);n(b[j],k,d,a,j)}}function m(a,b){var c,d,e,f=[];for(c="+"===a?["+"]:a.split("+"),e=0;e<c.length;++e)d=c[e],t[d]&&(d=t[d]),b&&"keypress"!=b&&s[d]&&(d=s[d],f.push("shift")),k(d)&&f.push(d);if(c=d,e=b,!e){if(!o){o={};for(var g in q)g>95&&112>g||q.hasOwnProperty(g)&&(o[q[g]]=g)}e=o[c]?"keydown":"keypress"}return"keypress"==e&&f.length&&(e="keydown"),{key:d,modifiers:f,action:e}}function n(a,b,c,d,e){v[a+":"+c]=b,a=a.replace(/\s+/g," ");var f=a.split(" ");1<f.length?l(a,f,b,c):(c=m(a,c),u[c.key]=u[c.key]||[],g(c.key,c.modifiers,{type:c.action},d,a,e),u[c.key][d?"unshift":"push"]({callback:b,modifiers:c.modifiers,action:c.action,seq:d,level:e,combo:a}))}var o,p,q={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},r={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},s={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},t={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},u={},v={},w={},x=!1,y=!1,z=!1;for(c=1;20>c;++c)q[111+c]="f"+c;for(c=0;9>=c;++c)q[c+96]=c;d(b,"keypress",j),d(b,"keydown",j),d(b,"keyup",j);var A={bind:function(a,b,c){a=a instanceof Array?a:[a];for(var d=0;d<a.length;++d)n(a[d],b,c);return this},unbind:function(a,b){return A.bind(a,function(){},b)},trigger:function(a,b){return v[a+":"+b]&&v[a+":"+b]({},a),this},reset:function(){return u={},v={},this},stopCallback:function(a,b){return-1<(" "+b.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable},handleKey:function(a,b,c){var d,e=g(a,b,c);b={};var h=0,j=!1;for(d=0;d<e.length;++d)e[d].seq&&(h=Math.max(h,e[d].level));for(d=0;d<e.length;++d)e[d].seq?e[d].level==h&&(j=!0,b[e[d].seq]=1,i(e[d].callback,c,e[d].combo,e[d].seq)):j||i(e[d].callback,c,e[d].combo);e="keypress"==c.type&&y,c.type!=z||k(a)||e||f(b),y=j&&"keydown"==c.type}};a.Mousetrap=A,"function"==typeof define&&define.amd&&define(A)}(window,document);
//# sourceMappingURL=lib.min.map